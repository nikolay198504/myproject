/* ===================================================================
   1. Подключаем шрифты (Montserrat, Open Sans)
=================================================================== */
@import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;600;700&display=swap");

/* ===================================================================
   2. Базовые стили для html, body и общий фон/цвет
=================================================================== */
html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: "Montserrat", sans-serif;
  font-weight: 300;
  background-color: #000; /* Чёрный фон */
  color: #fff;            /* Белый текст */
  display: flex;
  flex-direction: column;
}
#orientationLockOverlay, #orientationLockOverlay * {
  writing-mode: horizontal-tb !important;
  -webkit-writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  transform: none !important;
  rotate: 0deg !important;
  white-space: normal !important;
}

/* ================= Orientation Lock Overlay (phones/tablets landscape only) ================= */
/* Базовая стилизация оверлея (по умолчанию скрыт; показывается через класс на html и/или инлайн-стиль из JS) */
#orientationLockOverlay,
body > #orientationLockOverlay {
  position: fixed !important;
  inset: 0 !important;
  width: 100dvw !important;   /* dynamic viewport width для iOS */
  height: 100dvh !important;  /* dynamic viewport height для iOS */
  background: rgba(0, 0, 0, 0.9) !important;
  color: #fff !important;
  z-index: 2147483647 !important; /* максимально высоко поверх всего */
  display: none; /* JS включает display:flex */
  align-items: center !important;
  justify-content: center !important;
  text-align: center !important;
  padding: calc(24px + env(safe-area-inset-top)) 24px calc(24px + env(safe-area-inset-bottom)) 24px !important;
  box-sizing: border-box !important;
  pointer-events: all !important;
  opacity: 1 !important;
  visibility: visible !important;
}
#orientationLockOverlay .orientation-content {
  max-width: 720px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
}
#orientationLockOverlay .rotate-icon {
  font-size: 64px;
  line-height: 1;
  margin-bottom: 16px;
}
#orientationLockOverlay .orientation-title {
  font-weight: 800;
  font-size: 1.6rem;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
  color: #ffffff !important;
}
#orientationLockOverlay .orientation-text {
  font-size: 1.05rem;
  opacity: 0.9;
  color: #ffffff !important;
}

/* Усиление видимости текста на телефонах в горизонтали */
@media (max-width: 768px) and (orientation: landscape) {
  #orientationLockOverlay .orientation-title {
    font-size: 2rem !important;
    text-shadow: 0 2px 6px rgba(0,0,0,0.6) !important;
  }
  #orientationLockOverlay .orientation-text {
    font-size: 1.2rem !important;
    text-shadow: 0 2px 6px rgba(0,0,0,0.6) !important;
  }
  #orientationLockOverlay .rotate-icon { font-size: 72px !important; }
}

/* Включение оверлея и блокировка прокрутки только если html.landscape-locked и НЕ matebook-e */
@media (max-width: 1368px) and (orientation: landscape) {
  html.landscape-locked body {
    overflow: hidden !important;
    height: 100dvh !important;
  }
  html.landscape-locked #orientationLockOverlay {
    display: grid !important;
    place-items: center !important;
    isolation: isolate !important; /* создаём новый контекст наложения */
    mix-blend-mode: normal !important;
  }
  /* Гарантируем видимость контента оверлея */
  #orientationLockOverlay, #orientationLockOverlay * {
    color: #ffffff !important;
    visibility: visible !important;
    opacity: 1 !important;
    filter: none !important;
  }
  /* Контент спокойно центрируется через grid-wrapper */
  #orientationLockOverlay .orientation-content {
    position: static !important;
    transform: none !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    max-width: min(90vw, 820px) !important;
    padding: 12px !important;
    z-index: 2147483647 !important;
  }
  #orientationLockOverlay .orientation-title { font-weight: 800 !important; font-size: 2rem !important; }
  #orientationLockOverlay .orientation-text { font-size: 1.2rem !important; }
}

/* Убираем скрытие остального контента — достаточно высокого z-index у оверлея */

/* Сброс любых ротаций/переворотов макета при активной блокировке ландшафта,
   чтобы фиксированный оверлей занимал весь экран и был горизонтальным */
@media (max-width: 1368px) and (orientation: landscape) {
  html.landscape-locked,
  html.landscape-locked body {
    transform: none !important;
    rotate: 0deg !important;
  }
  html.landscape-locked .lock-portrait,
  html.landscape-locked .lock-portrait * {
    transform: none !important;
    rotate: 0deg !important;
    writing-mode: horizontal-tb !important;
    -webkit-writing-mode: horizontal-tb !important;
  }
}

/* На ширине больше 1368px (десктопы) — явно отключаем оверлей и разблокируем прокрутку */
@media (min-width: 1369px) {
  html.landscape-locked #orientationLockOverlay { display: none !important; }
  html.landscape-locked body { overflow: auto !important; height: auto !important; }
}

/* CSS-only fallback: показываем оверлей в ландшафте на телефонах/планшетах (только тач) даже без JS-класса */
@media (max-width: 1368px) and (orientation: landscape) and (pointer: coarse) {
  html #orientationLockOverlay {
    display: flex !important;
  }
  html body {
    overflow: hidden !important;
    height: 100dvh !important;
  }
}

/* ЖЁСТКИЙ ФОЛЛБЕК: в горизонте до 1368px всегда показывать оверлей, даже без тача/JS
   Если это покажется навязчивым на десктопах с эмуляцией — позже сузим условие */
@media (max-width: 1368px) and (orientation: landscape) {
  html #orientationLockOverlay { display: flex !important; }
  html body { overflow: hidden !important; height: 100dvh !important; }
}

/* Небольшой отладочный бейдж: показывает состояние локера (можно отключить позже) */
.orient-debug-badge {
  position: fixed !important;
  right: 8px !important;
  bottom: 8px !important;
  z-index: 200000 !important;
  background: rgba(0,0,0,0.7) !important;
  color: #fff !important;
  border: 1px solid #fff !important;
  border-radius: 6px !important;
  padding: 4px 6px !important;
  font-size: 12px !important;
  line-height: 1.1 !important;
  pointer-events: none !important;
}

/* High-specificity desktop overrides to ensure larger controls */
@media (min-width: 992px) {
  /* Поднимем базовый размер контейнеров, чтобы наследование тоже повысилось */
  #chatWindow .chat-footer,
  #chatWindow .input-area { font-size: 1.1rem !important; }

  #chatWindow .chat-footer button#startNewChat {
    padding: 20px 40px !important;
    font-size: 1.35rem !important;
    line-height: 1.32 !important;
    border-width: 3.5px !important;
    min-height: 58px !important;
  }
  #chatWindow .input-area input[type="text"] {
    padding: 22px 30px !important;
    font-size: 1.35rem !important;
    line-height: 1.32 !important;
    border-width: 3.5px !important;
    min-height: 60px !important;
  }
  #chatWindow .input-area button#sendBtn {
    padding: 20px 30px !important;
    font-size: 1.35rem !important;
    line-height: 1.32 !important;
    border-width: 3.5px !important;
    min-height: 58px !important;
  }
}

/* ================= Desktop: bottom three controls look ================= */
@media (min-width: 992px) {
  /* Тонкая линия-разделитель над футером */
  #chatWindow .chat-area {
    border-bottom: 1.5px solid rgba(255,255,255,0.55) !important;
    margin-bottom: 14px !important;
  }

  /* Футер с кнопкой «Iniciar nuevo chat» — по центру, таблетка */
  #chatWindow .chat-footer {
    padding: 8px 22px 10px 22px !important;
  }
  #chatWindow .chat-footer #startNewChat {
    display: inline-block !important;
    background: transparent !important;
    color: #ffffff !important;
    border: 2px solid #ffffff !important;
    border-radius: 9999px !important;
    padding: 14px 30px !important;
    font-weight: 700 !important;
    letter-spacing: 0.3px !important;
    font-size: 1.15rem !important;
    line-height: 1.2 !important;
    box-shadow: none !important;
  }

  /* Поле ввода и кнопка Enviar — таблетки, как на скрине */
  #chatWindow .input-area {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    padding: 8px 22px 18px 22px !important;
  }
  #chatWindow .input-area input[type="text"] {
    flex: 1 1 auto !important;
    background: rgba(255,255,255,0.06) !important;
    color: #ffffff !important;
    border: 2.5px solid #ffffff !important;
    border-radius: 9999px !important;
    padding: 16px 24px !important;
    outline: none !important;
    box-shadow: none !important;
    font-size: 1.15rem !important;
    line-height: 1.2 !important;
  }
  #chatWindow .input-area input::placeholder {
    color: rgba(255,255,255,0.65) !important;
  }
  #chatWindow .input-area #sendBtn {
    background: transparent !important;
    color: #ffffff !important;
    border: 2.5px solid #ffffff !important;
    border-radius: 9999px !important;
    padding: 14px 24px !important;
    font-weight: 700 !important;
    letter-spacing: 0.3px !important;
    box-shadow: none !important;
    white-space: nowrap !important;
    font-size: 1.15rem !important;
    line-height: 1.2 !important;
  }
}

/* Скрывать вступительные подзаголовки чата после старта диалога на всех устройствах */
#chatWindow.intro-collapsed .chat-subtitle {
  display: none !important;
}

/* Универсально для всех устройств: тонкие линии над и под областью чата */
#chatWindow .chat-area {
  border-top: 1.5px solid rgba(255,255,255,0.55) !important;
  border-bottom: 1.5px solid rgba(255,255,255,0.55) !important;
  margin-top: 12px !important;
  margin-bottom: 12px !important;
  padding-top: 6px !important; /* небольшой отступ от верхней линии */
}

/* Планшеты в горизонтали: всегда скрывать ДЛИННЫЙ второй подзаголовок в окне чата */
@media (min-width: 701px) and (max-width: 1368px) and (orientation: landscape) {
  #chatWindow .chat-subtitle:nth-of-type(2) {
    display: none !important;
  }
}

/* Десктоп (>=992px): белая «шапочка» прямо под верхней кромкой */
@media (min-width: 992px) {
  #chatWindow .chat-floating-content { padding-top: 36px !important; position: relative !important; }
  /* страховка: кнопки управления всегда справа-сверху */
  .chat-floating-window .chat-controls {
    position: absolute !important; right: 12px !important; top: 6px !important; left: auto !important;
    z-index: 3000 !important; display: flex !important; gap: 10px !important;
  }
  .chat-floating-window .chat-floating-header { padding-right: 44px !important; position: relative !important; z-index: 1 !important; }
}

/* Планшеты (701–1368px, обе ориентации): шапка CHATBOT AI прямо под верхней кромкой */
@media (min-width: 701px) and (max-width: 1368px) {
  #chatWindow .chat-floating-content { padding-top: 0px !important; position: relative !important; }
  /* Визуально — как у короткого приветствия: овал/бордер/центр */
  #chatWindow .chat-floating-header { padding: 0 10px !important; position: relative !important; z-index: 1 !important; }
  #chatWindow .chat-floating-header h2 {
    display: block !important;
    width: 100% !important;
    box-sizing: border-box !important;
    text-align: center !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    font-weight: 700 !important;
    color: #ffffff !important;
    border: 2px solid #ffffff !important;
    border-radius: 9999px !important;
    padding: 8px 14px !important;
    margin: 4px 0 10px 0 !important;
    background: transparent !important;
    box-shadow: none !important;
    text-shadow: none !important;
    outline: none !important;
  }
  #chatWindow .chat-floating-header::before,
  #chatWindow .chat-floating-header::after { display: none !important; content: none !important; }
  /* Кнопки — в правом верхнем углу окна */
  .chat-floating-window .chat-controls {
    position: absolute !important; right: 12px !important; top: 6px !important; left: auto !important;
    z-index: 3000 !important; display: flex !important; gap: 10px !important;
  }
}

/* Дополнительно: для сенсорных планшетов в горизонтали — понижаем размер .main-title-mobile гарантированно */
@media (min-width: 993px) and (max-width: 1368px) and (pointer: coarse) {
  header.text-left.text-white .main-title-mobile {
    font-size: 0.95rem !important;
    line-height: 1.12 !important;
    margin: 6px auto 6px auto !important;
  }
}

/* --------------------------------------------------------------
   ДЕКОРАТИВНЫЕ ЭФФЕКТЫ ОТКЛЮЧЕНЫ ОСОЗНАННО
   - Мерцание звёзд в шапке (.star-layer/.star + @keyframes twinkle)
   - Нижняя виньетка (body::after)

   Как включить снова (коротко):
   1) Верните CSS блоки для .star-layer/.star и @keyframes twinkle
      и/или используйте JS-вставку стилей из calc_v2.js (см. комментарий там).
   2) Верните блок body::after с градиентом для виньетки (при необходимости).
   3) Обновите версии статики в шаблоне calc.html, чтобы пробить кэш.

   Если потребуется — подскажу точные значения и аккуратные пресеты.
-------------------------------------------------------------- */


/* === Mobile: hide desktop subtitle === */
@media (max-width: 991.98px) {
  header.text-left.text-white .main-subtitle-desktop {
    display: none !important;
  }
  /* Когда начался разговор: скрыть вступительные подзаголовки в окне чата */
  #chatWindow.intro-collapsed .chat-subtitle {
    display: none !important;
  }
  /* Круглые рамки и отступы для вступительных подзаголовков чата как у карточек */
  #chatWindow .chat-subtitle {
    border: 2px solid #ffffff !important;
    border-radius: 24px !important;
    padding: 10px 14px !important;
    margin: 10px 0 !important;
    background: transparent !important;
    line-height: 1.28 !important;
  }
  /* Круглые "чипсы" для сообщений бота в чате (только не‑десктоп) */
  #chatWindow .chat-area .bot-message {
    border: 2px solid #ffffff !important;
    border-radius: 24px !important; /* эффект круглых карточек */
    padding: 10px 14px !important;
    margin: 10px 0 !important;
    background: transparent !important; /* как у вступительных текстов */
    line-height: 1.28 !important;
    word-break: break-word !important;
    overflow-wrap: anywhere !important;
  }
  /* Заголовок чата "CHATBOT AI" как чипса на мобильных */
  #chatWindow .chat-floating-header h2 {
    display: block !important;          /* на всю строку */
    width: 100% !important;             /* полная ширина контейнера */
    box-sizing: border-box !important;  /* чтобы бордер и паддинги учитывались в ширине */
    text-align: center !important;
    border: 2px solid #ffffff !important;
    border-radius: 9999px !important;   /* длинный овал */
    padding: 10px 14px !important;      /* как у .chat-subtitle/.bot-message */
    margin: 8px 0 14px 0 !important;
    background: transparent !important;
    line-height: 1.2 !important;
  }
  /* Убрать внешнее тонкое кольцо вокруг шапки на мобильных */
  #chatWindow .chat-floating-header {
    border: 0 !important;
    outline: none !important;
    box-shadow: none !important;
    background: transparent !important;
  }
  #chatWindow .chat-floating-header::before,
  #chatWindow .chat-floating-header::after {
    display: none !important;
    content: none !important;
  }

  /* Правый блок (MATRIZ DE COMPATIBILIDAD): зеркалим стрелку, чтобы смотрела к инпуту слева-наверх */
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad img.arrow,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .arrow,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .arrow-down,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .arrow-up {
    transform: scaleX(-1) !important;              /* зеркалим по горизонтали */
    margin-top: 8px !important;                    /* чуть ниже текста */
    margin-bottom: 8px !important;                 /* ближе к инпуту */
  }
}

/* ===================================================================
   Десктоп ≥ 992px: увеличить стрелки, поля ввода и кнопки в 2 раза
   Сильные переопределения с !important, чтобы перебить ранние правила
=================================================================== */
@media (min-width: 992px) and (hover: hover) and (pointer: fine) {
  /* Точное попадание по DOM-структуре колонок: 
     1-я колонка (PERSONAL) и 2-я колонка (COMPATIBILIDAD) */
  body .row.justify-content-center.g-5 > div:nth-child(1) .arrow-container > img {
    position: relative !important;
    left: -40px !important;
    top: -6px !important;
    transform: rotate(-12deg) !important;
    z-index: 5 !important;
  }
  body .row.justify-content-center.g-5 > div:nth-child(2) .arrow-container > img {
    position: relative !important;
    left: 40px !important;
    top: -6px !important;
    transform: scaleX(-1) rotate(-12deg) !important;
    z-index: 5 !important;
  }
  /* Стрелки в 2 раза больше */
  .row.justify-content-center.g-5 .arrow-container { 
    width: 160px !important; 
    height: 160px !important; 
  }
  .row.justify-content-center.g-5 .arrow,
  .row.justify-content-center.g-5 .arrow-up,
  .row.justify-content-center.g-5 .arrow-down {
    width: 160px !important;   /* было ~80 */
    height: 160px !important;  /* было ~80 */
    max-height: 160px !important;
    display: block !important;
    position: static !important;
    transform: none !important;
    margin: 10px auto 18px auto !important;
  }

  /* Поля ввода дат — в 2 раза выше/крупнее шрифт */
  .row.justify-content-center.g-5 .input-group.input-group-lg { 
    max-width: 600px !important; 
    width: 100% !important;
  }
  .row.justify-content-center.g-5 .input-group.input-group-lg .form-control {
    height: 88px !important;          /* было ~44 */
    font-size: 28px !important;       /* было ~14 */
    padding: 16px 22px !important;
    border-radius: 12px !important;
  }

  /* Кнопка Calcular — в 2 раза выше/крупнее */
  .row.justify-content-center.g-5 .btn.btn-custom {
    min-width: 420px !important;
    max-width: 600px !important;
    height: 88px !important;          /* было ~44 */
    font-size: 28px !important;       /* было ~14-16 */
    padding: 16px 28px !important;
    border-radius: 14px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
}

/* === Планшеты (iPad, 701–992px): центрируем заголовки/подписи в колонках, убираем большие сдвиги === */
@media (min-width: 701px) and (max-width: 992px) {
  /* Reset default P margins inside text blocks for precise control */
  body .row.justify-content-center.g-5 .text-block .text-arrow {
    margin: 0 !important;
  }
  /* Вариант B: два компактных блока в ряд (side-by-side) */
  .text-matriz-compatibilidad { margin-top: 0 !important; }
  .row.justify-content-center.g-5 {
    flex-direction: row !important;
    flex-wrap: wrap !important;
    justify-content: center !important;
    align-items: stretch !important;
  }
  /* Скрыть стрелки на планшетах (portrait) */
  .arrow-container,
  .arrow,
  .arrow-up,
  .arrow-down {
    display: none !important;
  }
  .row.justify-content-center.g-5 > .col-md-4 {
    flex: 0 0 50% !important;
    width: 50% !important;
    max-width: 460px !important; /* читаемая ширина карточки */
    padding-left: 12px !important;
    padding-right: 12px !important;
    margin-bottom: 0 !important;
  }
  /* Чуть сместить правую колонку (MATRIZ DE COMPATIBILIDAD) левее на iPad Mini портрет */
  .row.justify-content-center.g-5 > .col-md-4:last-child {
    margin-left: -46px !important;
  }
  /* Опустить ниже правый ввод даты и кнопку (MATRIZ DE COMPATIBILIDAD) */
  .row.justify-content-center.g-5 > .col-md-4:last-child .input-group.input-group-lg {
    margin-top: 22px !important;  /* ещё чуть ниже для портретной ориентации */
  }
  .row.justify-content-center.g-5 > .col-md-4:last-child .btn.btn-custom {
    margin-top: 18px !important;  /* ещё чуть ниже для портретной ориентации */
  }
  /* Отдельно опустить правую стрелку ниже (только колонка COMPATIBILIDAD) */
  .row.justify-content-center.g-5 > .col-md-4:last-child .arrow,
  .row.justify-content-center.g-5 > .col-md-4:last-child .arrow-down {
    margin-top: 90px !important; /* правую стрелку ниже, чем левую */
  }
  /* Общее: центрируем содержимое колонок */
  .row > [class*="col-"] {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
  }
  /* Сбрасываем большие смещения из style.css и центрируем контент в пределах колонок */
  .text-matriz-personal,
  .text-matriz-compatibilidad {
    position: static !important;
    top: 0 !important;
    left: 0 !important;
    text-align: center !important;
  }
  .text-matriz-personal .text-arrow,
  .text-matriz-personal p,
  .text-matriz-compatibilidad .text-arrow,
  .text-matriz-compatibilidad p {
    position: static !important;
    left: 0 !important;
    right: 0 !important;
    margin-left: auto !important;
    margin-right: auto !important;
    text-align: center !important;
    display: block !important;
    max-width: 320px !important;  /* ограничиваем ширину текста, чтобы не ломался перенос */
  }
  /* Размер шрифтов на планшетах: чуть меньше, чем на десктопе */
  .text-matriz-personal .text-arrow,
  .text-matriz-compatibilidad .text-arrow { font-size: 1.02em !important; line-height: 1.25 !important; letter-spacing: 0.2px; }
  .text-matriz-personal p,
  .text-matriz-compatibilidad p { font-size: 0.92em !important; line-height: 1.35 !important; }
  /* Выравниваем высоту текстовых блоков, чтобы инпуты были на одной линии */
  /* Фиксированная высота описаний + нижний отступ, чтобы стрелки не наезжали */
  .text-matriz-personal p,
  .text-matriz-compatibilidad p {
    height: 300px !important;           /* компактнее по высоте */
    margin-bottom: 18px !important;     /* больше отступа до стрелки */
  }
  .text-matriz-personal .text-arrow,
  .text-matriz-compatibilidad .text-arrow {
    height: 100px !important;           /* стрелки чуть меньше */
    margin-top: 6px !important;         /* отступ от текста сверху */
    margin-bottom: 16px !important;     /* отступ до инпутов */
  }
  /* Стрелочный блок и стрелки — без абсолютных отступов на планшетах */
  .arrow-container { display: flex !important; justify-content: center !important; }
  .arrow, .arrow-up, .arrow-down {
    position: static !important;
    left: auto !important; right: auto !important;
    top: auto !important; bottom: auto !important;
    transform: none !important;
    margin: 6px auto 16px !important;  /* больше отступа до инпута */
    display: block !important;
    height: 100px !important;          /* синхронизировано с .text-arrow */
    max-height: 100px !important;
    z-index: 1;
  }

  /* Улучшаем переносы заголовков/подписей */
  .text-matriz-personal .text-arrow,
  .text-matriz-personal p,
  .text-matriz-compatibilidad .text-arrow,
  .text-matriz-compatibilidad p {
    max-width: 480px !important;        /* шире текстовый блок — меньше «ступенек» переносов */
    white-space: normal !important;
    word-break: normal !important;
    overflow-wrap: anywhere !important;
    hyphens: auto !important;
  }
  .text-matriz-personal .text-arrow { margin-bottom: 10px !important; }
  .text-matriz-compatibilidad .text-arrow { margin-bottom: 10px !important; }

  /* Симметрия полей ввода и кнопок в обеих колонках */
  .text-matriz-personal .input-group.input-group-lg,
  .text-matriz-compatibilidad .input-group.input-group-lg,
  .text-matriz-personal .input-group.input-group-lg .form-control,
  .text-matriz-compatibilidad .input-group.input-group-lg .form-control,
  .text-matriz-personal .btn.btn-custom,
  .text-matriz-compatibilidad .btn.btn-custom {
    width: 280px !important;
    max-width: 280px !important;
    min-width: 280px !important;
    margin-left: auto !important;
    margin-right: auto !important;
    display: block !important;
  }
  .text-matriz-personal .btn.btn-custom,
  .text-matriz-compatibilidad .btn.btn-custom { height: 42px !important; font-size: 0.96rem !important; }
  .text-matriz-personal .input-group.input-group-lg,
  .text-matriz-compatibilidad .input-group.input-group-lg { margin-top: 10px !important; margin-bottom: 10px !important; }
  /* Гарантируем одинаковую точку старта первого инпута после стрелки */
  .text-matriz-personal .input-group.input-group-lg:first-of-type,
  .text-matriz-compatibilidad .input-group.input-group-lg:first-of-type { margin-top: 12px !important; }
  .text-matriz-personal .input-group.input-group-lg .form-control,
  .text-matriz-compatibilidad .input-group.input-group-lg .form-control { height: 42px !important; }
  /* Плавающая кнопка справа на iPad Mini (портрет) */
  button#floatingBtn.floating-button {
    position: fixed !important;
    right: 20px !important;
    left: unset !important;
    bottom: 80px !important;
    transform: none !important;
    z-index: 1000 !important;
  }
}

/* === iPad / планшеты: уменьшить CONTACTO / REDES SOCIALES / MIS HORARIOS === */
@media (min-width: 701px) and (max-width: 992px) {
  /* Заголовки колонок футера */
  .footer_section h4 {
    font-size: 1.1rem !important;
    margin-bottom: 8px !important;
  }
  /* Метка "REDES SOCIALES" */
  .footer_section .footer-logo {
    font-size: 1.2rem !important;
    margin-bottom: 8px !important;
    line-height: 1.1 !important;
  }
  /* Обычный текст футера (включая расписание) */
  .footer_section p {
    font-size: 0.95rem !important;
    margin-bottom: 6px !important;
  }
  /* Крупный email делаем компактнее на планшетах */
  .big-email {
    font-size: 1rem !important;
  }
  /* Иконки соцсетей поменьше */
  .social-icons a img {
    width: 28px !important;
    height: 28px !important;
  }
  /* Чуть меньше отступов в футере на планшетах */
  .footer_section {
    padding: 40px 0 !important;
    margin-top: 80px !important;
  }
  /* Заголовок/надпись в шапке ("Para el análisis de la matriz…") — компактнее на iPad */
  header.text-left.text-white h1,
  .main-title-mobile,
  h1.text-center {
    font-size: 1.2rem !important;
    line-height: 1.25 !important;
    margin: 10px auto 16px auto !important;
    text-align: center !important;
    max-width: 560px !important; /* чтобы переносы были аккуратнее */
    white-space: normal !important;
  }
  /* Самый крупный заголовок (TU MATRIZ PERSONALIZADA) делаем ещё меньше на iPad */
  .main-title,
  header.text-left.text-white h1.main-title {
    font-size: 1.0rem !important;
    line-height: 1.2 !important;
    margin: 8px 0 12px 0 !important; /* убираем автоматическое центрирование */
    text-align: left !important; /* как в макете: слева */
    align-self: flex-start !important; /* при флекс-контейнере */
    padding-left: 12px !important; /* небольшой внутренний отступ от края */
    max-width: 560px !important;
    white-space: normal !important;
  }
  /* Уменьшаем заголовки и описания блоков MATRIZ PERSONAL / COMPATIBILIDAD на iPad */
  .text-matriz-personal .text-arrow,
  .text-matriz-compatibilidad .text-arrow {
    font-size: 0.50em !important;
    line-height: 1.18 !important;
    letter-spacing: 0.01em !important;
    text-align: center !important;
    text-wrap: balance !important; /* аккуратные переносы заголовка */
    word-break: keep-all !important;
    overflow-wrap: normal !important;
    hyphens: none !important;
    max-width: 220px !important;
    margin: 0 auto 6px auto !important;
  }
  .text-matriz-personal p,
  .text-matriz-compatibilidad p {
    font-size: 0.46em !important;
    line-height: 1.36 !important;
    max-width: 220px !important;
    text-align: center !important;
    text-wrap: pretty !important;
    word-break: normal !important;
    overflow-wrap: break-word !important;
    hyphens: auto !important;
    margin: 0 auto 12px auto !important;
  }
  /* Стрелки компактнее */
  .arrow, .arrow-up, .arrow-down {
    position: static !important; /* убираем перекрытие текста */
    display: block !important;
    height: 36px !important;
    max-height: 36px !important;
    margin: 60px auto 10px auto !important; /* опускаем стрелки ещё ниже */
  }
  /* Аккуратная вертикальная композиция внутри колонок */
  .text-matriz-personal,
  .text-matriz-compatibilidad {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    gap: 10px !important;
    max-width: 340px !important; /* шире — меньше рваных переносов */
    margin: 0 auto !important;   /* центрируем внутри колонки */
    box-sizing: border-box !important;
    padding: 12px 14px !important;
    border-radius: 12px !important;
    border: none !important;            /* убрать рамку */
    background: transparent !important; /* убрать тёмный фон карточки */
    box-shadow: none !important;        /* убрать внутреннюю тень */
  }
  /* Убрать фон непосредственно у заголовков/описаний */
  .text-matriz-personal .text-arrow,
  .text-matriz-personal p,
  .text-matriz-compatibilidad .text-arrow,
  .text-matriz-compatibilidad p {
    background: transparent !important;
  }
  /* Единые размеры инпутов и кнопок */
  .text-matriz-personal .input-group.input-group-lg,
  .text-matriz-compatibilidad .input-group.input-group-lg,
  .text-matriz-personal .input-group.input-group-lg .form-control,
  .text-matriz-compatibilidad .input-group.input-group-lg .form-control,
  .text-matriz-personal .btn.btn-custom,
  .text-matriz-compatibilidad .btn.btn-custom {
    width: 220px !important;
    max-width: 220px !important;
    min-width: 220px !important;
  }
  .text-matriz-personal .input-group.input-group-lg .form-control,
  .text-matriz-compatibilidad .input-group.input-group-lg .form-control {
    height: 34px !important;
    font-size: 0.9rem !important;
  }
  .text-matriz-personal .btn.btn-custom,
  .text-matriz-compatibilidad .btn.btn-custom {
    height: 34px !important;
    font-size: 0.9rem !important;
    margin-top: 6px !important;
  }
}
/* === iPad Mini — портрет (701–992px, orientation: portrait): сделать инструкции меньше === */
@media (min-width: 701px) and (max-width: 992px) and (orientation: portrait) {
  /* Вертикальный стек колонок вместо двух в ряд — больше ширина для текста */
  .row.justify-content-center.g-5 {
    flex-direction: column !important;
    align-items: center !important;
    gap: 10px !important;                 /* ещё плотнее между блоками */
    margin-top: -64px !important;         /* ещё выше весь блок */
  }
  .row.justify-content-center.g-5 > .col-md-4 {
    flex: 0 0 100% !important;
    width: 100% !important;
    max-width: 600px !important;
    margin-top: -22px !important;         /* оба блока выше */
  }
  .row.justify-content-center.g-5 > .col-md-4:last-child {
    margin-left: 0 !important;
    transform: none !important;
    margin-top: -28px !important;         /* правый (второй) блок ещё выше */
  }

  /* Сброс возможных сдвигов и принудительное центрирование */
  .text-matriz-personal .text-arrow,
  .text-matriz-compatibilidad .text-arrow,
  .text-matriz-personal p,
  .text-matriz-compatibilidad p {
    position: static !important;
    top: auto !important;
    left: auto !important;
    transform: none !important;
    text-align: center !important;
    margin-left: auto !important;
    margin-right: auto !important;
  }

  /* Заголовки ("MATRIZ PERSONAL" и "MATRIZ DE COMPATIBILIDAD") — читаемо и не узко */
  .text-matriz-personal .text-arrow,
  .text-matriz-compatibilidad .text-arrow {
    display: block !important;            /* чтобы сработал margin-top */
    font-size: 0.42rem !important;       /* ещё меньше */
    line-height: 1.00 !important;
    max-width: 360px !important;         /* шире область текста */
    margin: 12px auto 6px auto !important;  /* базовый отступ сверху */
    position: relative !important;        /* визуально опустить, не влияя на поток */
    top: 58px !important;                 /* ещё ниже */
    letter-spacing: 0.01em !important;
    font-weight: 600 !important;         /* полужирный, без разрежения */
    font-style: normal !important;       /* убрать наклон/курсив */
    white-space: normal !important;
    word-break: normal !important;
    overflow-wrap: anywhere !important;
  }

  /* Опустить ещё ниже только верхнюю стрелку (MATRIZ PERSONAL) */
  .text-matriz-personal .text-arrow {
    top: 110px !important;                /* ещё ниже, чтобы не наезжала на текст */
    margin-top: 8px !important;           /* небольшой зазор над стрелкой */
    z-index: 1 !important;                /* стрелка под текстом на всякий случай */
  }

  /* Пояснительный текст — комфортная ширина и межстрочный интервал */
  .text-matriz-personal p,
  .text-matriz-compatibilidad p {
    font-size: 0.44rem !important;       /* ещё меньше */
    line-height: 1.40 !important;
    max-width: 360px !important;
    margin: -10px auto 22px auto !important; /* больше отступ снизу для стрелки */
    height: auto !important;             /* сброс фиксированной высоты */
    font-style: normal !important;       /* на случай курсива */
    white-space: normal !important;
    word-break: normal !important;
    overflow-wrap: anywhere !important;
  }

  /* Локально поднять слой текста PERSONAL, чтобы он всегда был над стрелкой */
  .text-matriz-personal p { position: relative !important; z-index: 2 !important; }

  /* Сблизить поля ввода и кнопки, немного поднять их */
  .text-matriz-personal .input-group.input-group-lg,
  .text-matriz-compatibilidad .input-group.input-group-lg {
    margin-top: 0px !important;
    margin-bottom: 4px !important;
  }
  .text-matriz-personal .btn.btn-custom,
  .text-matriz-compatibilidad .btn.btn-custom {
    margin-top: 4px !important;
  }

  /* Сдвинуть текст COMPATIBILIDAD вправо (заголовок и абзац) */
  .text-matriz-compatibilidad .text-arrow,
  .text-matriz-compatibilidad p {
    display: block !important;           /* чтобы margin/transform работал предсказуемо */
    text-align: left !important;
    margin-left: 0 !important;           /* убираем автопозиционирование */
    margin-right: 0 !important;
    padding-left: 10px !important;       /* небольшой базовый отступ */
    transform: translateX(109px) !important; /* ещё правее */
  }
} 
/* === iPad Mini landscape (993–1200px): фиксы для шапки, карточек и футера === */
@media (min-width: 993px) and (max-width: 1368px) {
  /* Шапка: растянуть фон без правого чёрного поля */
  header.text-left.text-white {
    width: 100vw !important;
    max-width: 100vw !important;
    margin: 0 auto !important;
    background-size: cover !important;
    background-repeat: no-repeat !important;
    background-position: center center !important;
  }
  /* Уменьшить заголовки в шапке (iPad landscape) */
  /* Главный заголовок: TU MATRIZ PERSONALIZADA */
  .main-title,
  header.text-left.text-white h1.main-title {
    font-size: 1.4rem !important; /* компактнее в горизонтали планшета */
    line-height: 1.16 !important;
    margin: 6px 0 8px 0 !important;
    text-align: left !important;
    padding-left: 10px !important;
  }
  /* Вводная строка: Para el análisis de la matriz, por favor introduce tu fecha de nacimiento */
  header.text-left.text-white h1,
  .main-title-mobile,
  h1.text-center {
    font-size: 1.2rem !important; /* немного увеличили — чтобы смотрелось аккуратнее */
    line-height: 1.16 !important;
    margin: 6px auto 8px auto !important;
    text-align: center !important;
    max-width: 680px !important;
  }
  /* На >=992px показывается .main-subtitle-desktop — уменьшим её размер на планшетах */
  /* Увеличим высоту шапки и добавим внутренний отступ, чтобы заголовок мог опускаться ниже */
  header.text-left.text-white {
    min-height: 560px !important;
    padding-top: 40px !important;
  }
  header.text-left.text-white .main-subtitle-desktop {
    display: block !important;          /* принудительно показываем */
    font-size: 1.8rem !important;       /* ещё крупнее для читабельности */
    margin-top: 0 !important;           /* управляем через top для надёжности */
    position: relative !important;
    top: 240px !important;              /* опускаем визуально вниз */
    line-height: 1.22 !important;
  }
  /* А мобильный заголовок в горизонтали планшетов скрываем, чтобы не конкурировал */
  header.text-left.text-white .main-title-mobile {
    display: none !important;
  }
  /* Плавающая кнопка справа в ландшафте iPad Mini */
  button#floatingBtn.floating-button {
    position: fixed !important;
    right: 24px !important;
    left: unset !important;
    bottom: 80px !important;
    transform: none !important;
  }

  /* Ряд с двумя колонками: БОК О БОК как на слайде 1 */
  .row.justify-content-center.g-5 {
    flex-direction: row !important;
    flex-wrap: nowrap !important;             /* не переносить */
    justify-content: center !important;       /* по центру */
    align-items: flex-start !important;
    gap: 60px !important;                     /* воздушный промежуток */
  }
  .row.justify-content-center.g-5 > .col-md-4 {
    flex: 0 0 44% !important;
    width: 44% !important;
    max-width: 520px !important;
  }
  /* Сброс сдвигов правой колонки — чтобы не налезали */
  .row.justify-content-center.g-5 > .col-md-4:last-child {
    margin-left: 0 !important;
    transform: none !important;
    position: relative !important;
    top: -22px !important;                 /* чуть ниже, как просили */
  }
  /* Единые размеры инпутов и кнопок (как на слайде) */
  .text-matriz-personal .input-group.input-group-lg,
  .text-matriz-compatibilidad .input-group.input-group-lg,
  .text-matriz-personal .input-group.input-group-lg .form-control,
  .text-matriz-compatibilidad .input-group.input-group-lg .form-control,
  .text-matriz-personal .btn.btn-custom,
  .text-matriz-compatibilidad .btn.btn-custom {
    width: 300px !important;
    max-width: 300px !important;
    min-width: 300px !important;
  }
  .row.justify-content-center.g-5 > .col-md-4:last-child .arrow,
  .row.justify-content-center.g-5 > .col-md-4:last-child .arrow-down {
    margin-top: 50px !important;
  }

  /* Убрать фон карточек текста и сделать компактнее отступы */
  .text-matriz-personal,
  .text-matriz-compatibilidad {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 4px 10px !important; /* было 8px — чуть подняли контент вверх */
    margin-top: -6px !important;   /* приподняли блоки инструкций ещё немного */
    position: static !important; /* сброс позиционирования из style.css */
    top: auto !important;
    left: auto !important;
  }
  /* Сброс позиционирования у внутренних элементов */
  .text-matriz-personal .text-arrow,
  .text-matriz-compatibilidad .text-arrow,
  .text-matriz-personal p,
  .text-matriz-compatibilidad p {
    position: static !important;
    left: auto !important;
    right: auto !important;
    top: auto !important;
  }
  /* Уменьшить заголовки и описания на iPad Mini landscape */
  body .row.justify-content-center.g-5 .text-matriz-personal .text-arrow,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .text-arrow {
    font-size: 1.00rem !important;            /* ещё крупнее заголовки блоков */
    line-height: 1.24 !important;
    text-align: center !important;
    max-width: 320px !important;
    margin: 0 auto 6px auto !important;
    position: static !important;
    transform: none !important;
    top: auto !important;
    left: auto !important;
  }
  body .row.justify-content-center.g-5 .text-matriz-personal p,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad p {
    font-size: 0.90rem !important;            /* ещё крупнее подзаголовок */
    line-height: 1.36 !important;
    text-align: center !important;
    max-width: 400px !important;
    margin: 0 auto 12px auto !important;
    position: static !important;
    transform: none !important;
    top: auto !important;
    left: auto !important;
  }
  /* Увеличить размер инструкций для горизонтального планшета (читабельнее) */
  /* Без агрессивных сдвигов заголовков и абзацев — все смещения выше отключены */
  /* Стрелки: видимы, умеренного размера и с лёгким наклоном как на слайде */
  .arrow-container { 
    display: block !important;
    width: 180px !important;                  /* контейнер ещё больше */
    height: 180px !important;
    position: relative !important;
    margin: 12px auto 12px auto !important;
  }
  .arrow, .arrow-up, .arrow-down {
    display: block !important;
    width: 160px !important;                  /* стрелки крупнее */
    height: 160px !important;
    max-height: 160px !important;
    position: relative !important;
    left: auto !important; right: auto !important; top: auto !important; bottom: auto !important;
    transform: none !important;
    margin: 0 auto !important;
  }
  /* Лёгкая калибровка наклона и смещения каждой из колонок */
  .row.justify-content-center.g-5 > .col-md-4:first-child .arrow-container > img {
    transform: rotate(-15deg) !important;
    left: -20px !important;
  }
  .row.justify-content-center.g-5 > .col-md-4:last-child .arrow-container > img {
    transform: scaleX(-1) rotate(-15deg) !important;
    left: 20px !important;
  }
  /* Сброс лишнего подъёма элементов в правой колонке */
  .row.justify-content-center.g-5 > .col-md-4:last-child .input-group.input-group-lg {
    position: relative !important;
    top: 0 !important;
    margin-top: 0 !important;
  }
  .row.justify-content-center.g-5 > .col-md-4:last-child .btn.btn-custom {
    position: relative !important;
    top: 0 !important;
    margin-top: 0 !important;
  }
  /* Планшеты (ландшафт): полностью скрыть стрелки */
  .arrow-container,
  .arrow,
  .arrow-up,
  .arrow-down,
  .arrow-right,
  img.arrow,
  img.arrow-right {
    display: none !important;
  }
  /* Плавающая кнопка и окно чата — поднять выше на планшетах (горизонтально) */
  /* Кнопки-лаунчеры (типовые провайдеры) */
  .intercom-launcher,
  .intercom-lightweight-app,
  #wh-widget-send-button,
  .crisp-client .cc-1x,
  #tidio-chat,
  #jivo-iframe-container,
  .tawk-button,
  a[href*="wa.me"],
  .whatsapp_float {
    bottom: 24px !important;
    right: 18px !important;
  }
  /* Окна/фреймы чата */
  .intercom-messenger-frame,
  iframe[src*="intercom"],
  iframe[src*="crisp"],
  iframe[src*="tidio"],
  iframe[src*="tawk"],
  iframe[src*="jivo"],
  iframe[src*="livechat"],
  iframe[src*="widget"],
  /* Доп. варианты провайдеров */
  iframe[id*="chat"],
  iframe[name*="chat"],
  iframe[title*="Chat" i],
  #crisp-chatbox,
  #tidio-chat,
  #intercom-container,
  .wa-chat-box,
  .tgme_widget,
  [id*="chat" i],
  [class*="chat" i],
  /* Элементы с inline fixed-стилями, связанные с чатами */
  iframe[style*="position: fixed" i],
  div[style*="position: fixed" i][class*="chat" i],
  div[style*="position: fixed" i][id*="chat" i] {
    position: fixed !important;
    bottom: 120px !important; /* подняли ещё выше */
    top: auto !important;
    right: 18px !important;
    left: auto !important;
    transform: none !important;
    -webkit-transform: none !important;
    z-index: 2147483647 !important;
    max-height: calc(100vh - 152px) !important;
  }
  /* Единые размеры инпутов и кнопок (уменьшенные) */
  body .row.justify-content-center.g-5 .text-matriz-personal .input-group.input-group-lg,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .input-group.input-group-lg,
  body .row.justify-content-center.g-5 .text-matriz-personal .input-group.input-group-lg .form-control,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .input-group.input-group-lg .form-control,
  body .row.justify-content-center.g-5 .text-matriz-personal .btn.btn-custom,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .btn.btn-custom {
    width: 240px !important;
    max-width: 240px !important;
    min-width: 240px !important;
  }
  body .row.justify-content-center.g-5 .text-matriz-personal .input-group.input-group-lg .form-control,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .input-group.input-group-lg .form-control {
    height: 34px !important;
    font-size: 0.9rem !important;
  }
  body .row.justify-content-center.g-5 .text-matriz-personal .btn.btn-custom,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .btn.btn-custom {
    height: 34px !important;
    font-size: 0.9rem !important;
    margin-top: 6px !important;
  }
  /* Сделать стрелки меньше на iPad Mini landscape */
  .arrow-container {
    width: 80px !important;
    height: 80px !important;
    position: static !important;
    margin: 4px auto 0 auto !important;
  }
  .arrow, .arrow-up, .arrow-down {
    display: block !important;
    position: static !important;
    width: 48px !important;
    height: 48px !important;
    max-height: 48px !important;
    margin: 8px auto 8px auto !important;
    left: auto !important;
    right: auto !important;
    top: auto !important;
    bottom: auto !important;
    transform: none !important;
  }
  /* Стрелки скрыты этим брейкпоинтом — никаких переопределений ниже */

  /* Футер: не давать CONTACTO наезжать на REDES */
  .footer_section .row {
    display: flex !important;
    flex-wrap: wrap !important;
    justify-content: space-between !important;
    align-items: flex-start !important;
    gap: 24px !important;
  }
  .footer_section .row > [class*="col-"],
  .footer_section .row > [class^="col"] {
    flex: 1 1 30% !important;
    min-width: 280px !important;
  }
  .footer_section * { position: static !important; }
  /* Повторное скрытие стрелок в самом конце брейкпоинта (на случай переопределений выше) */
  body .row.justify-content-center.g-5 .arrow-container,
  body .row.justify-content-center.g-5 .arrow-container *,
  body .row.justify-content-center.g-5 img.arrow,
  body .row.justify-content-center.g-5 img.arrow-right,
  body .row.justify-content-center.g-5 .arrow,
  body .row.justify-content-center.g-5 .arrow-up,
  body .row.justify-content-center.g-5 .arrow-down,
  body .row.justify-content-center.g-5 .arrow-right {
    display: none !important;
    visibility: hidden !important;
  }
  /* Сделать текст футера компактнее на горизонтальном планшете */
  .footer_section {
    padding: 40px 0 !important;   /* немного меньше вертикальные отступы */
    margin-top: 100px !important; /* компактнее верхний отступ */
  }
  .footer_section h4 {            /* CONTACTO / REDES SOCIALES / MIS HORARIOS */
    font-size: 1.00rem !important;
    margin-bottom: 6px !important;
    line-height: 1.15 !important;
  }
  .footer_section .footer-logo {  /* надпись REDES SOCIALES, если выделена */
    font-size: 1.08rem !important;
    margin-bottom: 6px !important;
    line-height: 1.12 !important;
  }
  .footer_section p {             /* Email, Instagram, расписание */
    font-size: 0.92rem !important;
    margin-bottom: 6px !important;
    line-height: 1.28 !important;
  }
  .big-email {                    /* крупный email делаем компактнее */
    font-size: 0.96rem !important;
  }
  .social-icons a img {           /* иконки соцсетей поменьше */
    width: 26px !important;
    height: 26px !important;
  }
}

/* === Fix: Привязать заголовок TU MATRIZ PERSONALIZADA в левый верхний угол (везде) === */
header.text-left.text-white {
  position: relative !important; /* чтобы абсолют у заголовка работал корректно */
}
header.text-left.text-white .main-title {
  position: absolute !important;
  top: 12px !important;
  left: 12px !important;
  margin: 0 !important;          /* перекрыть margin-top:120px !important из style.css */
  padding: 0 !important;
}

/* Позиция подзаголовка только для десктопа: выше и слева, без отступов */
@media (min-width: 701px) {
  header.text-left.text-white .main-title-mobile {
    position: absolute !important;
    top: 120px !important;        /* опустили ниже на десктопе */
    left: 50% !important;         /* по центру по горизонтали */
    transform: translateX(-50%) !important; /* точное центрирование */
    margin: 0 !important;
    padding: 0 !important;
    text-align: center !important;
    width: auto !important;
  }
}

/* Скрыть подзаголовок на мобильных */
@media (max-width: 700px) {
  header.text-left.text-white .main-title-mobile {
    display: block !important;         /* показать на телефоне */
    position: absolute !important;     /* позиционирование в шапке */
    top: 160px !important;             /* ещё ниже */
    left: 8px !important;              /* растягиваем почти на всю ширину */
    right: 8px !important;
    transform: none !important;
    margin: 0 !important;
    padding: 0 !important;
    text-align: center !important;     /* текст по центру */
    width: auto !important;            /* ширина от левого/правого края */
    white-space: normal !important;     /* разрешить перенос */
    word-wrap: normal !important;
    word-break: keep-all !important;   /* не ломать слова */
    hyphens: none !important;
    line-height: 1.22 !important;
    font-size: clamp(0.92rem, 4.3vw, 1rem) !important; /* стабилизируем на 2 строки */
  }
}

/* === iPad Pro / большие планшеты (ландшафт 1201–1366px): поднять и увеличить текст слева/справа === */
@media (min-width: 1201px) and (max-width: 1366px) and (orientation: landscape) {
  /* Только тексты инструкций для блоков MATRIZ PERSONAL / COMPATIBILIDAD */
  body .row.justify-content-center.g-5 .text-matriz-personal .text-arrow,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .text-arrow {
    font-size: 1.2rem !important;
    line-height: 1.22 !important;
    position: relative !important;
    top: -10px !important;
    transform: translateY(-6px) !important;
    margin: 0 auto 2px auto !important;
    text-align: center !important;
  }
  body .row.justify-content-center.g-5 .text-matriz-personal p,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad p {
    font-size: 0.9rem !important;
    line-height: 1.34 !important;
    position: relative !important;
    top: -12px !important;
    transform: translateY(-8px) !important;
    margin: 0 auto 8px auto !important;
    max-width: 260px !important;
    text-align: center !important;
  }
  /* Сдвинуть ТОЛЬКО правый текст (COMPATIBILIDAD) чуть вправо */
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .text-arrow {
    transform: translate(22px, -26px) !important; /* ещё на 4px выше */
    position: relative !important;
    top: -18px !important;
    left: 20px !important;
    margin-left: 8px !important;
  }
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad p {
    transform: translate(22px, -30px) !important; /* ещё на 4px выше */
    position: relative !important;
    top: -20px !important;
    left: 20px !important;
    margin-left: 8px !important;
  }
  /* Поднять инпут и кнопку в ПРАВОЙ колонке (COMPATIBILIDAD) */
  .row.justify-content-center.g-5 > .col-md-4:last-child .input-group.input-group-lg {
    position: relative !important;
    top: -26px !important; /* ещё на 4px выше */
    margin-top: 0 !important;
  }
  .row.justify-content-center.g-5 > .col-md-4:last-child .btn.btn-custom {
    position: relative !important;
    top: -32px !important; /* ещё на 4px выше */
    margin-top: 0 !important;
  }
  /* Плавающая кнопка и окно чата — поднять выше на планшетах (iPad Pro, горизонтально) */
  .intercom-launcher,
  .intercom-lightweight-app,
  #wh-widget-send-button,
  .crisp-client .cc-1x,
  #tidio-chat,
  #jivo-iframe-container,
  .tawk-button,
  a[href*="wa.me"],
  .whatsapp_float {
    bottom: 28px !important;
    right: 22px !important;
  }
  .intercom-messenger-frame,
  iframe[src*="intercom"],
  iframe[src*="crisp"],
  iframe[src*="tidio"],
  iframe[src*="tawk"],
  iframe[src*="jivo"],
  iframe[src*="livechat"],
  iframe[src*="widget"],
  /* Доп. варианты провайдеров */
  iframe[id*="chat"],
  iframe[name*="chat"],
  iframe[title*="Chat" i],
  #crisp-chatbox,
  #tidio-chat,
  #intercom-container,
  .wa-chat-box,
  .tgme_widget,
  [id*="chat" i],
  [class*="chat" i],
  iframe[style*="position: fixed" i],
  div[style*="position: fixed" i][class*="chat" i],
  div[style*="position: fixed" i][id*="chat" i] {
    position: fixed !important;
    bottom: 128px !important; /* подняли ещё выше */
    top: auto !important;
    right: 22px !important;
    left: auto !important;
    transform: none !important;
    -webkit-transform: none !important;
    z-index: 2147483647 !important;
    max-height: calc(100vh - 164px) !important;
  }
}

main {
  flex: 1 0 auto;
}

/* ===================================================================
   3. Стили для футера
=================================================================== */
.footer_section {
  flex-shrink: 0;
  margin-top: 150px;
  background-color: #000;
  color: #fff;
  padding: 70px 0;
}

/* ===================================================================
   4. Базовые стили для таблиц
=================================================================== */
table {
  width: 100%;
  padding: 10px;
  border-collapse: separate;
  border-spacing: 0 5px;
  table-layout: fixed;
}

table th {
  text-align: center;
  text-decoration: none;
  font-weight: normal;
}

table > tbody > tr > td,
table > tbody > tr > th,
table > tfoot > tr > td,
table > tfoot > tr > th,
table > thead > tr > td,
table > thead > tr > th {
  border: 2px solid #f8f8f8;
  text-align: center;
  vertical-align: middle;
  border-radius: 7px;
  padding: 5px;
}

.cell_gray {
  background-color: #E0E0E0 !important;
  color: #000 !important;
}

.cell_sahasrara    { background-color: #664074 !important; color: white !important; }
.cell_ajna         { background-color: #155493 !important; color: white !important; }
.cell_vishuddha    { background-color: #009ED1 !important; color: white !important; }
.cell_anahata      { background-color: #009E52 !important; color: white !important; }
.cell_manipura     { background-color: #EFBE3D !important; color: white !important; }
.cell_svadhisthana { background-color: #F28D3B !important; color: white !important; }
.cell_muladhara    { background-color: #E54144 !important; color: white !important; }
.cell_total        { background-color: #bcb392 !important; color: white !important; }

/* ===================================================================
   5. Адаптивные стили (медиа-запросы)
=================================================================== */

/* 5.1. До 1200px (большие планшеты / маленькие десктопы) */
@media (max-width: 1200px) {
  .footer_section {
    margin-top: 120px;
  }
  body {
    font-size: 0.95em;
  }
}

/* ===================================================================
   7. Адаптивные стили (breakpoints)
=================================================================== */

/* 7.1. До 1200px (крупные планшеты / маленькие десктопы) */
@media (max-width: 1200px) {
  :root {
    --footer-h4-size: 30px;
    --footer-logo-size: 36px;
    --footer-p-size: 28px;
  }
}

/* 7.2. До 992px (планшет, Bootstrap "md") */
@media (max-width: 992px) {
  header.text-left.text-white {
    min-height: 600px;
  }
  header.text-left.text-white h1 {
    margin-top: -50px;
    margin-left: -40px;
    margin-bottom: 100px;
    font-size: 2rem;
  }
  .input-group.input-group-lg {
    margin-top: 20px;
    margin-bottom: 20px;
  }
  .footer_section {
    margin-top: 100px;
    padding: 50px 0;
  }
  table {
    table-layout: auto;
    display: block;
    overflow-x: auto;
  }
  table th, table td {
    white-space: nowrap;
  }
  .chat-floating-window {
    width: 80%;
    right: 10%;
    left: auto;
    bottom: calc(100px + var(--floating-btn-size));
    font-size: 24px;
  }
  /* .floating-button удалён для десктопа */
}

/* 7.3. До 768px (портретная ориентация планшета / большие смартфоны) */
@media (max-width: 768px) {
  header.text-left.text-white {
    min-height: 500px;
  }
  header.text-left.text-white h1 {
    margin-top: 0;
    margin-left: 0;
    margin-bottom: 50px;
    
    white-space: normal;
    text-align: center;
  }
  .arrow-container img.arrow {
    display: none;
  }
  .input-group.input-group-lg {
    max-width: 100%;
    width: 100%;
    margin: 10px 0;
  }
  .btn.btn-custom {
    width: 100%;
    margin-bottom: 10px;
  }
  body {
    font-size: 0.9em;
  }
  .footer_section {
    margin-top: 100px !important;
    padding: 40px 0;
  }
  .chat-floating-window {
    width: 90%;
    left: 5%;
    right: 5%;
    bottom: calc(80px + 60px + 10px);
    font-size: 20px;
  }
  .floating-button {
    position: fixed !important; /* фиксируем кнопку на экране на мобильных, чтобы не двигалась при прокрутке */
    bottom: 80px;
    right: 20px;
    width: 60px;
    height: 60px;
  }
  table {
    display: block;
    overflow-x: auto;
    table-layout: auto;
  }
  table th, table td {
    padding: 3px;
    white-space: nowrap;
  }
}

/* 7.4. До 576px (смартфоны, Bootstrap "xs") */
/* === Универсальный мобильный блок для всех смартфонов === */
/* === Универсальный мобильный блок для всех смартфонов === */
@media (max-width: 700px) {
  /* Плавающая кнопка слева */
  .floating-button {
    left: unset  !important;
    right: 20px !important;
    bottom: 80px !important;
    top: auto !important;
  }
  /* Фон не растягивается */
  header.text-left.text-white {
    min-height: 340px !important;
    background-size: cover !important;
    background-position: center center !important;
  }
  
}

  /* Плавающая кнопка слева
  .floating-button {
    left: 20px !important;
    right: unset !important;
    bottom: 80px !important;
    top: auto !important;
  }

  /* На телефонах кнопка справа */
  @media (max-width: 700px) {
  body .floating-button {
    left: auto !important;
    right: 20px !important;  
    bottom: 80px !important;
    top: auto !important;
  }
}


  /* Фон не растягивается */
  header.text-left.text-white {
    min-height: 340px !important;
    background-size: cover !important;
    background-position: center center !important;
  }
  .main-title-mobile, h1.text-center {
    margin: 10px auto !important;
    /* font-size: 1.3em !important;  УДАЛЕНО, чтобы не перебивать style.css */
    left: 0 !important;
    top: 0 !important;
    text-align: center !important;
    position: static !important;
    white-space: normal !important;
  }

/* 7.5. До 430px (iPhone 14 Pro Max в портретном режиме) */
@media (max-width: 430px) {
  /* Мобильная адаптация футера: контакты, соцсети, расписание */
  .footer_section h4 {
    font-size: 1.07em !important; /* уменьшить размер заголовков */
    margin-bottom: 10px !important;
    text-align: center !important;
    font-family: inherit;
  }
  .footer_section .footer-logo {
    font-size: 1.07em !important; /* перебиваем десктопный стиль для REDES SOCIALES */
    font-family: inherit !important;
    font-weight: 600 !important;
    margin-bottom: 10px !important;
    text-align: center !important;
  }
  .big-email {
    font-size: 1em !important; /* уменьшить email */
    word-break: break-all;
    text-align: center !important;
    display: block !important;
  }
  .footer_section p {
    font-size: 0.98em !important; /* уменьшить текст расписания и прочее */
    margin-bottom: 10px !important;
    text-align: center !important;
  }
  .footer_section .footer-col {
    margin-bottom: 10px !important;
    padding: 0 2px !important;
  }
  .footer_section .footer_contact .contact_link_box i {
    font-size: 1em !important;
    margin-bottom: 2px;
  }
  .footer_section .footer_social {
    margin-top: 10px !important;
    margin-bottom: 10px !important;
  }
  .social-icons a img {
    width: 28px !important;
    height: 28px !important;
  }
}
@media (max-width: 430px) {
  /* Уменьшаем размер input-group и кнопки Calcular на мобильных */
  .input-group.input-group-lg,
  .input-group.input-group-lg .form-control {
    max-width: 210px !important; /* максимальная ширина поля ввода */
    font-size: 1em !important;   /* размер шрифта поменьше */
    height: 38px !important;     /* высота поля ввода меньше */
    padding: 4px 10px !important;/* внутренние отступы */
    border-radius: 7px !important;
    margin-top: -8px !important; /* Поднимаем поле ввода даты максимально вверх (минимальный отступ сверху) */
  }
  .btn.btn-custom {
    /* Кнопка Calcular сразу под полем ввода без отступа */
    width: 210px !important;
    min-width: 210px !important;
    max-width: 210px !important;
    height: 38px !important;
    font-size: 1em !important;
    padding: 4px 10px !important;
    border-radius: 7px !important;
    margin-top: 0 !important; /* Минимальный отступ сверху — кнопка максимально близко к полю ввода */
    display: block !important;
    box-sizing: border-box;
  }
}

  /* --- Чистый вид: только один блок для кнопки и поля ввода --- */
  .input-gold {
    font-size: 1em !important;   /* размер шрифта для ввода */
    padding: 4px 10px !important;/* внутренние отступы */
    height: 38px !important;     /* высота поля ввода */
    border-radius: 7px !important;
  }
  .btn.btn-custom {
    width: 210px !important;
    min-width: 210px !important;
    max-width: 210px !important;
    height: 38px !important;
    font-size: 1em !important;
    padding: 4px 10px !important;
    cursor: pointer !important;
  }

  .text-matriz-compatibilidad {
    float: none !important;
    text-align: left !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    align-items: flex-start !important;
    align-self: flex-start !important;
  }
  .text-matriz-compatibilidad .text-arrow, /* заголовок MATRIZ DE COMPATIBILIDAD */
.text-matriz-compatibilidad p { /* подпись под MATRIZ DE COMPATIBILIDAD */
  font-size: 1.479em !important; /* уменьшенный базовый размер для мобильных */
  text-align: center !important;
  margin: 8px auto 8px auto !important; 
  color: #fff !important;
  background: rgba(0,0,0,0.30);
  border-radius: 6px;
  max-width: 80vw;
  font-weight: 500 !important;
  box-sizing: border-box;
  overflow-wrap: break-word !important;
  word-break: break-word !important;
  white-space: normal !important;
  padding: 6px 10px 6px 10px !important;
}

  .main-title,
  h1.text-center {
    font-size: 1.05em !important;
    font-weight: 600 !important;
    margin-top: 0 !important;
    margin-bottom: 20px !important;
    margin-left: 0 !important;
    text-align: center !important;
    white-space: normal !important;
    line-height: 1.15 !important;
    background: rgba(0,0,0,0.40);
    display: inline-block;
    padding: 18px 8px 10px 8px;
    border-radius: 11px;
    max-width: 90vw !important;
    color: #fff !important;
    box-sizing: border-box;
    overflow-wrap: break-word !important;
    word-break: break-word !important;
    letter-spacing: 0.01em;
    box-shadow: 0 2px 8px rgba(0,0,0,0.10);
    position: relative;
    z-index: 2;
  }

  .text-matriz-personal .text-arrow, /* заголовок MATRIZ PERSONAL */
  .text-matriz-personal p { /* подпись под MATRIZ PERSONAL */
    font-size: 0.98em !important; /* размер текста */
    text-align: left !important; /* выравнивание текста по левому краю */
    margin: 16px 0 8px 48px !important; /* смещаем подпись вправо и ближе к заголовку для совпадения с COMPATIBILIDAD */
    color: #fff !important; /* цвет текста — белый */
    background: rgba(0,0,0,0.30); /* полупрозрачный чёрный фон */
    display: block !important; /* блочный элемент */
    padding: 4px 8px; /* внутренние отступы: 4px сверху и снизу, 8px слева и справа */
    border-radius: 6px; /* скругление углов */
    max-width: 89vw; /* максимальная ширина блока — 89% ширины окна браузера */
    font-weight: 500 !important; /* насыщенность шрифта */
    box-sizing: border-box; /* учитываем padding и border в ширине */
    overflow-wrap: break-word !important; /* переносить длинные слова */
    word-break: break-word !important; /* переносить слова при нехватке места */
    white-space: normal !important;
  }

  /* Desktop: выравниваем размер MATRIZ PERSONAL под COMPATIBILIDAD */
  @media (min-width: 701px) {
    .text-matriz-personal .text-arrow,
    .text-matriz-personal p {
      font-size: 2em !important;
    }
    /* Совмещаем размер шрифта у MATRIZ DE COMPATIBILIDAD с PERSONAL */
    .text-matriz-compatibilidad .text-arrow,
    .text-matriz-compatibilidad p {
      font-size: 1.7em !important;
    }
    /* Выравниваем вертикальный сдвиг текстовых блоков */
    .text-matriz-personal {
      top: -25px !important;
    }
    /* Единое смещение для обоих полей ввода */
    .inputs-offset {
      margin-top: -40px !important;
    }
    /* Только левая колонка (PERSONAL): сделать ниже, чем правая */
    .text-matriz-personal ~ .arrow-container ~ .inputs-offset {
      margin-top: 5px !important; /* увеличьте/уменьшите по вкусу */
    }
    /* Точная подстройка расстояния между инпутом и кнопкой (десктоп) */
    .inputs-offset.mb-3 {
      margin-bottom: 12px !important; /* изменяйте это значение, чтобы сблизить/раздвинуть кнопку */
    }
    .col-md-4 .btn-custom {
      margin-top: 0 !important; /* при необходимости поднимайте/опускайте кнопку относительно инпута */
    }
    /* Left arrow (PERSONAL) */
    /* Чуть поднимаем левую стрелку для симметрии */
    .arrow-up {
      top: 70px !important;
      left: -215px !important; /* фиксация горизонтального смещения */
    }
    /* Зеркалим правую стрелку по вертикали и горизонтали */
    /* Right arrow (COMPATIBILIDAD) */
    .arrow-down {
      top: 30px !important;
      bottom: auto !important;
      left: 260px !important;
    }
  }

/* === Универсальный мобильный блок для всех смартфонов === */
/* === Универсальный мобильный блок для всех смартфонов === */
@media (max-width: 700px) {
  /* Запрещаем горизонтальную прокрутку на мобильных */
  html, body { overflow-x: hidden !important; }
  /* Плавающая кнопка слева */
  .floating-button {
    left: 20px !important;
    right: unset !important;
    bottom: 80px !important;
    top: auto !important;
  }
  /* Фон не растягивается */
  header.text-left.text-white {
    min-height: 340px !important;
    background-size: cover !important;
    background-position: center center !important;
  }


}

  /* Фон не растягивается */
  header.text-left.text-white {
    min-height: 340px !important;
    background-size: cover !important;
    background-position: center center !important;
  }
  /* Центрирование заголовков и подписей */
  .text-matriz-personal p,
  .text-matriz-compatibilidad p {
    left: 0 !important;
    top: 0 !important;
    margin-left: 0 !important;
    margin-top: 0 !important;
    text-align: center !important;
    position: static !important;
  }
  

@media (max-width: 700px) {
  /* Контейнеры колонок: на мобильных на всю ширину и по центру */
  .text-matriz-personal,
  .text-matriz-compatibilidad {
    width: 100% !important;
    float: none !important;
    text-align: center !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;  /* центрируем внутренние элементы */
    /* Сбрасываем смещения из style.css (left: ±240/250px) */
    position: static !important;
    top: 0 !important;
    left: 0 !important;
  }
  /* Любые прямые дети заголовочных контейнеров — по центру */
  .text-matriz-personal > *,
  .text-matriz-compatibilidad > * {
    float: none !important;
    margin-left: auto !important;
    margin-right: auto !important;
    text-align: center !important;
    max-width: 92vw !important;
  }
  /* Центрируем контейнер со стрелкой между колонками */
  .arrow-container {
    display: flex !important;
    justify-content: center !important;
  }
  /* Сбрасываем абсолютное позиционирование стрелок на мобильных */
  .arrow,
  .arrow-up,
  .arrow-down {
    position: static !important;
    left: auto !important;
    right: auto !important;
    top: auto !important;
    bottom: auto !important;
    transform: none !important;
    margin: 8px auto !important;
    display: block !important;
  }
  .text-matriz-personal p,
  .text-matriz-compatibilidad p {
    text-align: center !important; 
    position: static !important; /* убираем относительное позиционирование */
    left: 0 !important;           /* отменяем горизонтальные сдвиги */
    top: 0 !important;            /* отменяем вертикальные сдвиги */
    margin-left: 0 !important;
    margin-top: 0 !important;
    margin-right: 0 !important;
  }
  /* Центрируем заголовки и подписи обеих колонок на мобильных и убираем асимметрию */
  .text-matriz-personal .text-arrow,
  .text-matriz-personal p,
  .text-matriz-compatibilidad .text-arrow,
  .text-matriz-compatibilidad p {
    text-align: center !important;
    position: static !important;
    left: 0 !important;
    right: 0 !important;
    margin: 8px auto !important; /* перекрывает margin-left:48px у PERSONAL */
    display: block !important;
    width: 100% !important;      /* растягиваем на всю ширину строки */
    max-width: 92vw !important;  /* ограничиваем внутри вьюпорта */
    float: none !important;
  }
  /* Контейнер правой колонки тоже центрируем на мобильных */
  .text-matriz-compatibilidad {
    text-align: center !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    align-items: center !important;
    align-self: auto !important;
  }
  /* ВАЖНО: элементы имеют класс .text-arrow, у этого селектора выше специфичность,
     поэтому нужно переопределить именно его на мобильных */
  .text-matriz-compatibilidad .text-arrow {
    font-size: 0.98em !important; /* совпадает с MATRIZ PERSONAL */
  }
  /* Плавающая кнопка на правом краю экрана (мобильные) */
  body .floating-button,
  .floating-button {
    position: fixed !important;
    left: auto !important;
    right: 10px !important;   /* у самого края */
    bottom: 80px !important;
    z-index: 1000 !important;
  }
  .matrix-description {
    text-align: center !important;
    margin: 0 8px 10px 8px !important;
    line-height: 1.3 !important;
    display: block !important;
    word-break: break-word !important;
    white-space: normal !important;
    font-size: 1em !important;
  }
  .matrix-hint {
    padding: 7px 10px !important;
    text-align: center !important;
    margin: 8px auto 0 auto !important;
    display: block !important;
    line-height: 1.2 !important;
    max-width: 92vw !important;
    background: rgba(0,0,0,0.55);
    color: #fff !important;
    border-radius: 8px;
    position: relative !important;
    z-index: 10;
    box-shadow: 0 2px 8px rgba(0,0,0,0.10);
    left: 0;
    right: 0;
    font-size: 0.98em !important;
  }
  .footer_section {
    margin-top: 50px !important;
    padding: 20px 0;
  }
}

  @media (max-width: 480px) {
    .floating-button {
      left: 10px !important;
      bottom: 60px !important;
      width: 45px !important;
      height: 45px !important;
    }
    .main-title-mobile, h1.text-center {
      font-size: 1.1em !important;
      padding: 6px 2px 6px 2px !important;
    }
    .chat-floating-window {
      width: 96vw;
      left: 2vw;
      right: 2vw;
      top: 10px;
      bottom: 10px;
      border-radius: 10px;
      font-size: 15px;
      padding: 3px;
    }
    /* Chat: improve readability and available space on small phones */
    .chat-floating-header {
      margin-top: 22px !important; /* push header further down */
      padding: 4px 6px !important;
    }
    .chat-floating-header h2 {
      font-size: 20px !important;
    }
    .chat-floating-header::before {
      display: none !important;
    }
    .chat-subtitle {
      margin: 2px 0 !important;
      padding: 4px 8px !important;
      font-size: 0.95em !important;
    }
    .chat-floating-content {
      padding: 10px 6px 6px 6px !important; /* add a bit more top padding */
    }
    /* Place controls in the very top-right corner and make them smaller */
    .chat-controls {
      top: -4px !important; /* a touch lower */
      right: 14px !important; /* shift a bit left */
      gap: 6px !important;
      z-index: 2100 !important;
    }
    .chat-minimize,
    .chat-close {
      font-size: 32px !important; /* increased a bit more */
      line-height: 1 !important;
      padding: 4px !important; /* keep touch target comfy */
    }
    .chat-area {
      min-height: 55vh !important;
      max-height: none !important;
      line-height: 1.5 !important;
      font-size: 1.05em !important;
      margin: 4px 0 !important;
      padding: 8px !important;
      border-top: none !important;
      border-bottom: none !important;
    }
    .message {
      margin: 4px 0 !important;
      padding: 8px 10px !important;
    }
    table th, table td {
      padding: 2px 4px;
      font-size: 13px;
    }
    .footer_section {
      padding: 15px 0;
      font-size: 13px;
    }
    .main-title-mobile {
      font-size: 0.95em !important;
    }
  }

  @media (max-width: 375px) {
    .main-title-mobile, h1.text-center {
      font-size: 1em !important;
      padding: 2px 1px 2px 1px !important;
    }
    .floating-button {
      left: 4px !important;
      bottom: 40px !important;
      width: 38px !important;
      height: 38px !important;
    }
    .chat-floating-window {
      top: 5px;
      bottom: 5px;
      width: 98%;
      left: 1%;
      right: 1%;
      font-size: 14px;
      border-radius: 5px;
      padding: 3px;
    }
    body {
      font-size: 0.75em;
    }
    .main-title-mobile {
      font-size: 0.9em !important;
    }
  }

@media (max-width: 700px) {
  .main-title-mobile {
    font-size: 1.3em !important;      /* Размер шрифта на мобильных */
    margin-top: 20px !important;      /* Отступ сверху */
    margin-bottom: 20px !important;   /* Отступ снизу */
    text-align: center !important;
  } /* <= только для мобильных */
}
@media (max-width: 480px) {
  .main-title-mobile {
    font-size: 1.1em !important;      /* Размер шрифта на очень маленьких экранах */
  }
}
@media (max-width: 375px) {
  .main-title-mobile {
    font-size: 1em !important;        /* Размер шрифта на самых маленьких экранах */
  }
}

/* ===================================================================
   Телефоны: фиксируем вид картинки при повороте (портретный вид в ландшафте)
   Используйте класс .keep-portrait на нужном <img>
   Планшеты не затрагиваем (брейкпоинт до 700px)
=================================================================== */
@media (max-width: 700px) and (orientation: portrait) {
  img.keep-portrait {
    transform: none;
    width: 100%;
    height: auto;
    display: block;
    margin: 0 auto;
    object-fit: contain;
  }
}

@media (max-width: 700px) and (orientation: landscape) {
  /* Чтобы не появлялась прокрутка из-за поворота изображения */
  html, body { overflow: hidden; }

  img.keep-portrait {
    /* Вендорные префиксы + динамические единицы */
    -webkit-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
    transform: rotate(90deg);
    transform-origin: center center;
    width: 100vh;  /* fallback */
    width: 100dvh; /* iOS/Android динамическая высота */
    height: 100vw; /* fallback */
    height: 100dvw; /* динамическая ширина */
    object-fit: contain;
    display: block;
    margin: 0 auto;
  }
}

/* Аналогичное правило для телефонов в ландшафте, когда ширина > 700, но высота маленькая */
@media (max-height: 700px) and (orientation: landscape) {
  html, body { overflow: hidden; }
  img.keep-portrait {
    -webkit-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
    transform: rotate(90deg);
    transform-origin: center center;
    width: 100vh;  /* fallback */
    width: 100dvh; /* динамическая */
    height: 100vw; /* fallback */
    height: 100dvw; /* динамическая */
    object-fit: contain;
    display: block;
    margin: 0 auto;
  }
}

/* ===================================================================
   Телефоны: фиксируем ВЕСЬ экран в портретном виде при повороте
   Оборачиваем контент в <div class="lock-portrait"> в шаблоне
   Планшеты не затрагиваем (до 700px)
=================================================================== */
@media (max-width: 700px) and (orientation: portrait) {
  .lock-portrait {
    position: static !important;
    transform: none !important;
    transform-origin: initial !important;
    width: 100vw !important;
    height: auto !important;
    overflow: visible !important;
  }
}

@media (max-width: 700px) and (orientation: landscape) {
  /* Блокируем прокрутку и фиксируем высоту экрана */
  html, body {
    overflow: hidden !important; /* рамка округления */
    height: 100vh !important;    /* fallback */
    height: 100dvh !important;   /* динамическая высота для мобильных */
  }
  body { position: relative !important; }

  .lock-portrait {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vh !important;    /* fallback */
    width: 100dvh !important;   /* динамическая ширина (равна высоте экрана) */
    height: 100vw !important;   /* fallback */
    height: 100dvw !important;  /* динамическая высота (равна ширине экрана) */
    /* Вендорные префиксы + более надёжный порядок трансформаций */
    -webkit-transform: rotate(90deg) translateY(-100vh);
    -ms-transform: rotate(90deg) translateY(-100vh);
    transform: rotate(90deg) translateY(-100vh);
    transform-origin: top left !important;
    overflow: hidden !important;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    z-index: 2147483647; /* поверх всего */
  }
}

/* Дублируем правило для кейса, когда в ландшафте ширина устройства > 700px, но высота маленькая (типично для телефонов) */
@media (max-height: 700px) and (orientation: landscape) {
  html, body {
    overflow: hidden !important;
    height: 100vh !important;   /* fallback */
    height: 100dvh !important;  /* динамическая */
  }
  body { position: relative !important; }

  .lock-portrait {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vh !important;   /* fallback */
    width: 100dvh !important;  /* динамическая */
    height: 100vw !important;  /* fallback */
    height: 100dvw !important; /* динамическая */
    -webkit-transform: rotate(90deg) translateY(-100vh);
    -ms-transform: rotate(90deg) translateY(-100vh);
    transform: rotate(90deg) translateY(-100vh) !important;
    transform-origin: top left !important;
    overflow: hidden !important;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    z-index: 2147483647;
  }
}

/* ===================================================================
  8. Десктоп (≥ 993px): увеличить фон заголовка (картинка часов)
  Не влияет на планшеты/мобилки
=================================================================== */
@media (min-width: 992px) {
  header.text-left.text-white {
    /* Заполняем всю ширину, без чёрных полей слева/справа */
    background-size: cover !important;         /* заполнить контейнер по ширине */
    background-repeat: no-repeat !important;   /* без повторов */
    background-position: center center !important; /* по центру */
    min-height: 560px !important;              /* высота секции под фон (уменьшили, чтобы текст был виден) */
    position: relative !important;             /* для абсолютного позиционирования подзаголовка */
    flex-direction: column !important;         /* складывать блоки вертикально на десктопе */
  }
  /* Показать и позиционировать десктопный подзаголовок, скрыть мобильный */
  header.text-left.text-white .main-subtitle-desktop {
    display: block !important;
    position: static !important;                 /* показать в обычном потоке */
    margin: 340px auto 0 auto !important;        /* чуть ниже */
    padding: 0 !important;
    font-size: 3rem !important;                /* чуть меньше */
    line-height: 1.2 !important;                 /* комфортное межстрочное */
    font-weight: 700 !important;
    color: #fff !important;                      /* белый */
    text-shadow: 0 2px 8px rgba(0,0,0,0.5) !important;
    white-space: normal !important;
    text-align: center !important;
    z-index: 1 !important;
    background: transparent !important;          /* убираем подложку */
  }
  header.text-left.text-white .main-title-mobile {
    display: none !important;           /* не трогаем мобилки, только десктоп */
  }
}

/* === iPad Mini (701–992px): полностью скрыть стрелки, чтобы не залезали на текст === */
@media (min-width: 701px) and (max-width: 992px) {
  .arrow-container,
  .arrow,
  .arrow-up,
  .arrow-down {
    display: none !important;
  }
  /* Убрать наложение: сбросить позиционирование и задать отступы для текстов и форм */
  .text-matriz-personal .text-arrow,
  .text-matriz-compatibilidad .text-arrow,
  .text-matriz-personal p,
  .text-matriz-compatibilidad p {
    position: static !important;
    transform: none !important;
    top: auto !important;
    left: auto !important;
    margin: 0 auto 16px auto !important;
    max-width: 560px !important;
    text-align: center !important;
  }
  /* Сблизить заголовки с инструкциями */
  .text-matriz-personal .text-arrow,
  .text-matriz-compatibilidad .text-arrow {
    margin-bottom: 0px !important;
    line-height: 1.15 !important;
  }
  .text-matriz-personal p,
  .text-matriz-compatibilidad p {
    margin-top: 2px !important;
    margin-bottom: 8px !important;
    line-height: 1.22 !important;
  }
  /* Ещё ближе: первый заголовок к следующей строке инструкции */
  .text-matriz-personal .text-arrow:first-child,
  .text-matriz-compatibilidad .text-arrow:first-child {
    margin-bottom: 0px !important;
  }
  /* Вторая строка-инструкция сразу после заголовка */
  .text-matriz-personal .text-arrow + .text-arrow,
  .text-matriz-compatibilidad .text-arrow + .text-arrow {
    margin-top: 0 !important;
    margin-bottom: 6px !important;
  }
  /* Общие отступы абзацев-инструкций ещё компактнее */
  .text-matriz-personal p,
  .text-matriz-compatibilidad p {
    margin-top: 4px !important;
    margin-bottom: 10px !important;
  }
  /* Центрирование блока совместимости на всякий случай */
  .text-matriz-compatibilidad,
  .text-matriz-compatibilidad .text-arrow,
  .text-matriz-compatibilidad p {
    text-align: center !important;
    margin-left: auto !important;
    margin-right: auto !important;
    display: block !important;
  }
  .input-group.input-group-lg {
    margin-top: 6px !important;
    margin-bottom: 8px !important;
  }
  .btn.btn-custom {
    margin-top: 8px !important;
  }
}

/* Strongest override for iPad Mini portrait/landscape: close gaps between title and instruction */
@media (min-width: 701px) and (max-width: 992px) {
  /* Reset any default margins on text arrows/headings so our values take effect */
  body .row.justify-content-center.g-5 .text-block .text-arrow,
  body .row.justify-content-center.g-5 .text-block h1.text-arrow,
  body .row.justify-content-center.g-5 .text-block h2.text-arrow,
  body .row.justify-content-center.g-5 .text-block h3.text-arrow,
  body .row.justify-content-center.g-5 .text-block h4.text-arrow {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }
  body .row.justify-content-center.g-5 .text-matriz-personal .text-arrow:first-child,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .text-arrow:first-child {
    margin-top: 12px !important; /* lower title a bit */
    margin-bottom: -22px !important; /* tighter gap to instruction */
    line-height: 1.12 !important;
    font-size: 0.95em !important; /* slightly smaller title on iPad Mini */
  }
  body .row.justify-content-center.g-5 .text-matriz-personal .text-arrow + .text-arrow,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .text-arrow + .text-arrow {
    margin-top: -22px !important; /* pull instruction closer to title */
    margin-bottom: 8px !important; /* default for both blocks */
    line-height: 1.16 !important;
    font-size: 0.9em !important; /* smaller to avoid collisions */
  }
  /* PERSONAL: collapse space to the input even more */
  body .row.justify-content-center.g-5 .text-matriz-personal .text-arrow + .text-arrow {
    margin-bottom: 0 !important; /* instruction -> input gap minimal */
  }
  /* Hide the arrow between PERSONAL instruction and input to prevent layout gap */
  body .row.justify-content-center.g-5 .text-matriz-personal + .arrow-container {
    display: none !important;
  }
  body .row.justify-content-center.g-5 .text-matriz-personal ~ .arrow-container {
    margin-top: 0 !important;
    margin-bottom: 0 !important; /* no spacing above the input */
    height: 0 !important; /* collapse from flow */
    position: relative !important; /* for positioning inner arrow */
  }
  body .row.justify-content-center.g-5 .text-matriz-personal ~ .arrow-container + .input-group.input-group-lg {
    margin-top: -32px !important; /* even stronger pull-up under instruction */
  }
  /* Guard in case a utility class adds margin above */
  body .row.justify-content-center.g-5 .text-matriz-personal ~ .input-group.inputs-offset {
    margin-top: -6px !important;
  }
  /* Direct nudge on the input itself */
  #inputDate1 {
    margin-top: -6px !important;
  }
  /* Remove any residual bottom margin on PERSONAL text block */
  body .row.justify-content-center.g-5 .text-matriz-personal {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
  /* Ensure the last instruction line has no own bottom margin */
  body .row.justify-content-center.g-5 .text-matriz-personal .text-arrow:last-child {
    margin-bottom: 0 !important;
    display: inline-block; /* allow transform to apply correctly */
    transform: translateY(22px); /* push instruction further toward input */
  }
  /* Ensure all PERSONAL text lines behave as blocks to avoid inline spacing quirks */
  body .row.justify-content-center.g-5 .text-matriz-personal .text-arrow {
    display: block !important;
  }
  /* Kill default image spacing inside arrow container */
  body .row.justify-content-center.g-5 .arrow-container .arrow {
    display: block;
    margin: 0 !important;
    position: absolute !important; /* overlay it */
    top: -10px; /* slightly above the input */
    left: 50%;
    transform: translateX(-50%);
    pointer-events: none; /* avoid blocking clicks */
    max-height: 14px; /* keep it subtle */
  }
  /* Explicitly override position offsets coming from style.css */
  .text-matriz-personal { top: 0 !important; margin-top: 16px !important; }
  .text-matriz-compatibilidad { top: 0 !important; margin-top: 22px !important; }
  /* Ensure arrows don't collide with inputs/text */
  .arrow-container {
    margin-top: 6px !important;
    margin-bottom: 14px !important;
  }
  /* Add controlled space below the whole text block to avoid touching inputs */
  .text-block {
    margin-bottom: 6px !important; /* tighter between block and inputs */
  }
  /* Опустить поля ввода и кнопки чуть ниже */
  .input-group.input-group-lg {
    margin-top: 2px !important; /* minimal gap above inputs */
  }
  /* Доп. контроль именно для этих групп */
  .inputs-offset {
    margin-top: 6px !important; /* tighter */
  }
  .btn.btn-custom {
    margin-top: 6px !important;
    margin-bottom: 10px !important;
  }
  /* Доп. «воздух» между первым блоком и заголовком совместимости */
  #button-addon3 {
    margin-bottom: 12px !important; /* reduce space before compatibility block */
  }
}

/* =============================================================
   Huawei MateBook E 2023 — точечные правки только при .matebook-e
   Класс .matebook-e добавляется скриптом в <html> для этого устройства.
   Не влияет на телефоны/планшеты без класса.
============================================================= */
@media (min-width: 992px) and (max-width: 1400px) {
  html.matebook-e, html.matebook-e body {
    -webkit-text-size-adjust: 100% !important;
    touch-action: manipulation !important;
    overscroll-behavior-y: none !important;
  }

  /* Шапка — компактнее заголовки/подзаголовок */
  html.matebook-e header.text-left.text-white {
    min-height: 360px !important;
    background-attachment: scroll !important; /* избегаем рывков при скролле */
  }
  html.matebook-e .main-title {
    font-size: 1.6rem !important;
    line-height: 1.2 !important;
  }
  html.matebook-e .main-subtitle-desktop {
    font-size: 1.6rem !important;
    line-height: 1.25 !important;
    margin-top: 220px !important;
  }

  /* Колонки/тексты — немного шире и с воздухом */
  html.matebook-e .row.justify-content-center.g-5 {
    gap: 16px !important;
  }
  html.matebook-e .row.justify-content-center.g-5 > .col-md-4 {
    flex: 0 0 48% !important;
    width: 48% !important;
  }
  html.matebook-e .text-matriz-personal,
  html.matebook-e .text-matriz-compatibilidad {
    max-width: 520px !important;
    padding: 8px 12px !important;
  }
  html.matebook-e .text-matriz-personal .text-arrow,
  html.matebook-e .text-matriz-compatibilidad .text-arrow {
    font-size: 1.0rem !important;
  }
  html.matebook-e .text-matriz-personal p,
  html.matebook-e .text-matriz-compatibilidad p {
    font-size: 0.95rem !important;
    line-height: 1.35 !important;
  }

  /* Инпуты/кнопки — 16px/44px, чтобы не было авто‑зума и промахов */
  html.matebook-e .input-group.input-group-lg .form-control {
    font-size: 16px !important;
    min-height: 44px !important;
  }
  html.matebook-e .btn.btn-custom {
    font-size: 16px !important;
    min-height: 44px !important;
  }

  /* Чат — не перекрывает элементы, компактнее в высоту */
  html.matebook-e #floatingBtn.floating-button {
    right: 16px !important;
    bottom: 96px !important;
    z-index: 1000 !important;
  }
  html.matebook-e .chat-floating-window {
    width: min(96vw, 480px) !important;
    height: min(70vh, 560px) !important;
    right: 16px !important;
    bottom: 110px !important;
    border-radius: 12px !important;
  }
  /* Десктоп (не MateBook E): слегка уже окно чата */
  html:not(.matebook-e) .chat-floating-window {
    width: min(98vw, 700px) !important;
    right: 16px !important;
  }
  html.matebook-e .chat-area {
    max-height: calc(70vh - 170px) !important;
  }

  /* Тап‑подсветка и SVG масштабирование */
  html.matebook-e input,
  html.matebook-e button {
    -webkit-tap-highlight-color: transparent;
  }
  html.matebook-e svg {
    max-width: 100% !important;
    height: auto !important;
  }
}

/* MateBook E — >=992px: растянуть шапку на всю ширину и отключить вертикальные заголовки */
@media (min-width: 992px) {
  html.matebook-e body {
    overflow-x: hidden !important;
  }
  /* Отключаем возможный поворот на мобильных для MateBook E */
  html.matebook-e .lock-portrait {
    position: static !important;
    transform: none !important;
    -webkit-transform: none !important;
    -ms-transform: none !important;
    transform-origin: initial !important;
    width: auto !important;
    height: auto !important;
    overflow: visible !important;
  }
  html.matebook-e header.text-left.text-white {
    width: 100% !important;
    max-width: 100% !important;
    min-height: 520px !important;
    background-size: cover !important;
    background-position: center center !important;
    width: 100vw !important; /* гарантированно на всю ширину окна */
    background-repeat: no-repeat !important;
    background-attachment: scroll !important;
  }
  /* Сброс возможных поворотов/вертикальной записи у заголовков в шапке */
  html.matebook-e header.text-left.text-white .main-title,
  html.matebook-e header.text-left.text-white .main-subtitle-desktop,
  html.matebook-e header.text-left.text-white h1,
  html.matebook-e header.text-left.text-white .main-title-mobile {
    writing-mode: horizontal-tb !important;
    -webkit-writing-mode: horizontal-tb !important;
    transform: none !important;
    rotate: 0deg !important;
    white-space: normal !important;
  }
  /* Полностью отключаем побочные эффекты правил блокировки поворота экрана
     (которые активируются для телефонов при маленькой высоте). На MateBook E
     в ландшафте высота окна может быть невысокой, поэтому явно возвращаем
     нормальные значения для прокрутки и высоты документа. */
  html.matebook-e,
  html.matebook-e body {
    overflow-x: clip !important;
    overflow-y: auto !important;
    height: auto !important;
  }
  /* На всякий случай: запретить поворот «портретных» картинок */
  html.matebook-e img.keep-portrait {
    -webkit-transform: none !important;
    -ms-transform: none !important;
    transform: none !important;
    width: auto !important;
    height: auto !important;
  }
  /* На всякий случай — контейнер внутри шапки на всю ширину */
  html.matebook-e header.text-left.text-white .container,
  html.matebook-e header.text-left.text-white .container-fluid,
  html.matebook-e header.text-left.text-white .row {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 auto !important;
  }
  /* Убрать ограничители ширины у контейнера в шапке */
  html.matebook-e header.text-left.text-white .container,
  html.matebook-e header.text-left.text-white .container-fluid {
    max-width: none !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
  /* Обнулить бутстраповские гаттеры у .row внутри шапки */
  html.matebook-e header.text-left.text-white .row {
    --bs-gutter-x: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
  /* Зажать ширину корня и убрать горизонтальный скролл */
  html.matebook-e html,
  html.matebook-e body {
    width: 100% !important;
    overflow-x: clip !important;
  }
  /* Картинки и SVG не должны давать переполнение */
  html.matebook-e img,
  html.matebook-e svg {
    max-width: 100% !important;
    height: auto !important;
  }
  /* Изменить размер окна чата */
  html.matebook-e .chat-floating-window {
    width: min(96vw, 480px) !important;
  }
  /* Согласовать ограничение ширины и для не MateBook на десктопе */
  html:not(.matebook-e) .chat-floating-window {
    width: min(98vw, 700px) !important;
  }
}

/* ==========================================
   iPad Pro — ТОЛЬКО этот девайс
   Портрет: 1024×1366, Ландшафт: 1366×1024 (эмулятор DevTools)
========================================== */
/* Портрет */
@media (min-width: 1020px) and (max-width: 1034px) and (orientation: portrait) {
  .chat-floating-window {
    position: fixed !important;
    right: 24px !important; left: auto !important; margin: 0 !important;
    width: min(70vw, 540px) !important;   /* уточнённая ширина портрет */
    height: min(92vh, 1000px) !important; /* уточнённая высота портрет */
    bottom: calc(190px + env(safe-area-inset-bottom)) !important; /* уточнённый отступ снизу портрет */
    z-index: 1001 !important;
  }
  #chatWindow .chat-floating-content { padding-top: 2px !important; }
  .chat-floating-window .chat-controls { right: 12px !important; top: 6px !important; left: auto !important; }
}

/* Ландшафт */
@media (min-width: 1360px) and (max-width: 1376px) and (orientation: landscape) {
  .chat-floating-window {
    position: fixed !important;
    right: 24px !important; left: auto !important; margin: 0 !important;
    width: min(60vw, 580px) !important;   /* уточнённая ширина ландшафт */
    height: min(86vh, 860px) !important;  /* оставляем */
    bottom: calc(170px + env(safe-area-inset-bottom)) !important; /* уточнённый отступ снизу ландшафт */
    z-index: 1001 !important;
  }
  #chatWindow .chat-floating-content { padding-top: 2px !important; }
  .chat-floating-window .chat-controls { right: 12px !important; top: 6px !important; left: auto !important; }
}

/* === Global interactivity fixes === */
/* Стрелки никогда не должны перекрывать клики по полям ввода */
.arrow-container,
.arrow-container img,
.arrow,
.arrow-up,
.arrow-down,
.arrow-right {
  pointer-events: none !important;
}
/* Поля ввода и их контейнеры — всегда интерактивные поверх декоративных элементов */
.input-group,
.input-group .form-control {
  position: relative;
  z-index: 10;
  pointer-events: auto;
}

/* ===================================================================
   Десктоп ≥ 992px — финальные переопределения (самые сильные)
   Размещены в самом конце файла, с высокой специфичностью и !important
   чтобы перебить все более ранние правила (в т.ч. 34px !important)
=================================================================== */

/* Планшеты (701–1368px): окно чата по умолчанию скрыто — как на слайде 1
   Пользователь видит только плавающую кнопку; окно открывается лишь по явному действию */
@media (min-width: 701px) and (max-width: 1368px) {
  /* Спрятать окно чата, если нет явного признака открытости */
  .chat-floating-window {
    /* НЕ используем display:none !important, чтобы JS мог показать окно */
    position: fixed !important;
    right: 24px !important;
    left: auto !important;           /* принудительно убираем привязку к левому краю */
    margin-left: 0 !important;       /* на случай центровки */
    margin-right: 0 !important;      /* фиксируем отступ справа только через right */
    bottom: calc(300px + env(safe-area-inset-bottom)) !important; /* ещё выше от нижней кромки (доп. подъём) */
    width: min(96vw, 480px) !important;
    height: min(92vh, 980px) !important; /* чтобы низ был виден и окно вписывалось в экран */
    z-index: 1001 !important;
    /* Визуальный стиль (как отдельное аккуратное окно) */
    background: rgba(0, 0, 0, 0.85) !important;
    border: 2px solid rgba(255,255,255,0.8) !important;
    border-radius: 18px !important;
    box-shadow: 0 14px 40px rgba(0,0,0,0.55) !important;
    backdrop-filter: blur(4px) !important;
    overflow: hidden !important;
    padding: 10px 10px calc(10px + env(safe-area-inset-bottom)) 10px !important;

    /* Скрыто по умолчанию */
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
    transform: translateY(8px) scale(0.98);
    transition: opacity .18s ease, transform .18s ease, visibility 0s linear .18s;
  }
  /* Явные состояния открытости, которые может выставлять JS */
  .chat-floating-window.open,
  .chat-floating-window.is-open,
  .chat-floating-window[aria-hidden="false"],
  .chat-floating-window[data-open="true"],
  .chat-floating-window[style*="display:block" i],
  .chat-floating-window[style*="display: block" i] {
    display: flex !important;
    flex-direction: column !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    transform: translateY(0) scale(1);
    transition: opacity .18s ease, transform .18s ease;
  }
  /* --- Управляем расположением кнопок заголовка (закрыть/свернуть) справа --- */
  .chat-floating-window { position: fixed !important; }
  /* Общая шапка у разных провайдеров */
  .chat-floating-window .header,
  .chat-floating-window .chat-header,
  .chat-floating-window .window-header,
  .chat-floating-window .titlebar {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-end !important; /* кнопки вправо */
    gap: 8px !important;
    padding-right: 10px !important;
    position: relative !important;
  }
  /* Крестик (закрыть) — возможные селекторы */
  .chat-floating-window .btn-close,
  .chat-floating-window .close,
  .chat-floating-window .close-button,
  .chat-floating-window [aria-label*="close" i],
  .chat-floating-window [title*="close" i],
  .chat-floating-window [aria-label*="cerrar" i],
  .chat-floating-window [title*="cerrar" i] {
    order: 2 !important;            /* самый правый */
    margin-left: 8px !important;
  }
  /* Свернуть (minimize) — возможные селекторы */
  .chat-floating-window .btn-minimize,
  .chat-floating-window .minimize,
  .chat-floating-window .minimize-button,
  .chat-floating-window [aria-label*="minimize" i],
  .chat-floating-window [title*="minimize" i],
  .chat-floating-window [aria-label*="minimizar" i],
  .chat-floating-window [title*="minimizar" i] {
    order: 1 !important;            /* рядом слева от крестика */
  }
  /* На случай абсолютного позиционирования кнопок у провайдера — прижмём вправо */
  .chat-floating-window .header .btn-close,
  .chat-floating-window .chat-header .btn-close,
  .chat-floating-window .window-header .btn-close,
  .chat-floating-window .titlebar .btn-close,
  .chat-floating-window .header .close,
  .chat-floating-window .chat-header .close,
  .chat-floating-window .window-header .close,
  .chat-floating-window .titlebar .close {
    position: absolute !important;
    right: 10px !important;
    top: 8px !important;
  }
  .chat-floating-window .header .minimize,
  .chat-floating-window .chat-header .minimize,
  .chat-floating-window .window-header .minimize,
  .chat-floating-window .titlebar .minimize {
    position: absolute !important;
    right: 34px !important; /* левее крестика */
    top: 8px !important;
  }
  /* Если контента много — прокрутка внутри окна */
  .chat-floating-window .scroll,
  .chat-floating-window .content,
  .chat-floating-window .inner {
    max-height: 100% !important;
    overflow: auto !important;
  }
  /* Контент внутри, если это iframe провайдера — вписать в окно */
  .chat-floating-window > iframe,
  .chat-floating-window iframe {
    width: 100% !important;
    height: 100% !important;
    border: 0 !important;
    border-radius: 12px !important;
  }
  /* Небольшой внутренний отступ для встроенных контейнеров провайдеров */
  .chat-floating-window .inner,
  .chat-floating-window .content,
  .chat-floating-window .container,
  .chat-floating-window .wrapper {
    padding: 8px 10px !important;
  }

  /* Кнопку держим справа, как на слайде 1 */
  button#floatingBtn.floating-button {
    position: fixed !important;
    right: 24px !important;
    bottom: 96px !important;
    z-index: 1000 !important;
  }

  /* ПРИЖАТЬ КНОПКИ УПРАВЛЕНИЯ ОКНА ЧАТА СПРАВА (для обеих ориентаций) */
  .chat-floating-window { position: fixed !important; }
  .chat-floating-window .chat-controls {
    position: absolute !important;
    right: 12px !important;
    left: auto !important;
    top: 6px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: flex-end !important;
    gap: 10px !important;
    z-index: 3000 !important; /* гарантированно выше заголовка и контента */
    pointer-events: auto !important;
  }
  .chat-floating-window .chat-close { order: 2 !important; }
  .chat-floating-window .chat-minimize { order: 1 !important; }
  /* Чтобы заголовок не пересекался с кнопками — добавим отступ справа у шапки */
  .chat-floating-window .chat-floating-header {
    padding-right: 44px !important;
    position: relative !important;
    z-index: 1 !important; /* ниже контролов */
    pointer-events: none !important; /* клики проходят к контролам */
  }
  /* И отступ сверху у контента, чтобы кнопки были над ним, а не «внутри» */
  .chat-floating-window .chat-floating-content { padding-top: 80px !important; position: relative !important; }
}

/* Планшеты — ГОРИЗОНТАЛЬ: кнопки нашей кастомной шапки чата вправо */
@media (min-width: 701px) and (max-width: 1368px) and (orientation: landscape) {
  .chat-floating-window .chat-controls {
    position: absolute !important;
    right: 12px !important;
    left: auto !important;  /* сброс возможного left */
    top: 10px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: flex-end !important;
    gap: 10px !important;
    z-index: 1002 !important;
  }
  .chat-floating-window .chat-close { order: 2 !important; }
  .chat-floating-window .chat-minimize { order: 1 !important; }
}

/* УСИЛЕННЫЕ ПРАВИЛА (на случай переопределений) — применяются для обеих ориентаций */
@media (min-width: 701px) and (max-width: 1368px) {
  .chat-floating-window { direction: ltr !important; }
  .chat-floating-window > .chat-controls { left: auto !important; right: 12px !important; top: 10px !important; }
  .chat-floating-window .chat-controls > .chat-close,
  .chat-floating-window .chat-controls > .chat-minimize {
    position: relative !important;
  }
}

/* Планшеты в портрете: гарантированная кликабельность первого инпута */
@media (min-width: 701px) and (orientation: portrait) {
  /* На планшетах стрелки скрываем, чтобы исключить перекрытия */
  .arrow-container,
  .arrow,
  .arrow-up,
  .arrow-down,
  .arrow-right { display: none !important; }

  /* Сам инпут и его контейнер — поверх всего */
  #inputDate1,
  #inputDate1:focus,
  #inputDate1:focus-visible,
  #inputDate1:active {
    position: relative !important;
    z-index: 1002 !important;
    pointer-events: auto !important;
    touch-action: manipulation !important;
    -webkit-user-select: text !important;
    user-select: text !important;
  }
  #inputDate1 { background-color: #fff9e6 !important; }
  /* Контейнер группы тоже поднимаем */
  #inputDate1.closest,
  .input-group.input-group-lg {
    position: relative !important;
    z-index: 1001 !important;
  }
}
@media (min-width: 992px) {
  /* Стрелки: x2 и без ограничений по высоте */
  body .row.justify-content-center.g-5 .text-matriz-personal img.arrow,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad img.arrow,
  body .row.justify-content-center.g-5 .text-matriz-personal .arrow,
  body .row.justify-content-center.g-5 .text-matriz-personal .arrow-up,
  body .row.justify-content-center.g-5 .text-matriz-personal .arrow-down,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .arrow,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .arrow-up,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .arrow-down {
    width: 120px !important;
    height: 120px !important;
    max-height: none !important;
    display: block !important;
    position: static !important;
    margin: 6px auto 12px auto !important; /* ближе к полям */
    transform: none !important;
    }
  body .row.justify-content-center.g-5 .arrow-container {
    width: 120px !important;
    height: 120px !important;
  }

  /* Поля ввода: x2 высота/шрифт */
  body .row.justify-content-center.g-5 .text-matriz-personal .input-group.input-group-lg .form-control,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .input-group.input-group-lg .form-control {
    height: 64px !important;         /* ~1.5x */
    font-size: 22px !important;
    padding: 12px 18px !important;
    border-radius: 10px !important;
    line-height: 1.2 !important;
  }
  /* Увеличить доступную ширину групп */
  body .row.justify-content-center.g-5 .text-matriz-personal .input-group.input-group-lg,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .input-group.input-group-lg {
    max-width: 480px !important;
    width: 100% !important;
  }

  /* Кнопка: x2 высота/шрифт */
  body .row.justify-content-center.g-5 .text-matriz-personal .btn.btn-custom,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .btn.btn-custom {
    height: 66px !important;
    font-size: 22px !important;
    padding: 12px 22px !important;
    min-width: 320px !important;
    max-width: 480px !important;
    border-radius: 12px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  /* Жёсткие ID-оверрайды — на случай любых конфликтов */
  #inputDate1,
  #inputDate2 {
    height: 64px !important;
    font-size: 22px !important;
    padding: 12px 18px !important;
    border-radius: 10px !important;
  }
  #button-addon3,
  #button-addon4 {
    height: 66px !important;
    font-size: 22px !important;
    padding: 12px 22px !important;
    min-width: 320px !important;
    border-radius: 12px !important;
  }
}

/* ===== Desktop final directional fix for right arrow (must be last) ===== */
@media (min-width: 992px) {
  /* Правая (compatibilidad): зеркалим + лёгкий сдвиг вправо и вверх */
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad img.arrow,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .arrow,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .arrow-up,
  body .row.justify-content-center.g-5 .text-matriz-compatibilidad .arrow-down {
    position: relative !important;
    left: 40px !important;
    top: -6px !important;
    transform: scaleX(-1) rotate(-12deg) !important;
  }
  /* Левая (personal): сдвиг влево и вверх */
  body .row.justify-content-center.g-5 .text-matriz-personal img.arrow,
  body .row.justify-content-center.g-5 .text-matriz-personal .arrow {
    position: relative !important;
    left: -40px !important;
    top: -6px !important;
    transform: rotate(-12deg) !important;
  }
}

/* ===== Mobile & Tablet reset (<=991.98px): вернуть исходное поведение стрелок ===== */
@media (max-width: 991.98px) {
  .text-matriz-personal img.arrow,
  .text-matriz-personal .arrow,
  .text-matriz-compatibilidad img.arrow,
  .text-matriz-compatibilidad .arrow,
  .text-matriz-compatibilidad .arrow-up,
  .text-matriz-compatibilidad .arrow-down,
  .text-matriz-personal .arrow-up,
  .text-matriz-personal .arrow-down {
    position: absolute !important;
    left: auto !important;
    right: auto !important;
    top: auto !important;
    bottom: auto !important;
    transform: none !important;
    margin: 0 !important;
  }
}

/* Phones only: make the compatibility arrow point down (override reset above) */
@media (max-width: 767.98px) {
  /* Сильное переопределение: правая колонка (2-я) — стрелка вниз */
  body .row.justify-content-center.g-5 > div:nth-child(2) .arrow-container > img,
  body .row.justify-content-center.g-5 > div:nth-child(2) .arrow-container > .arrow,
  body .text-matriz-compatibilidad .arrow-container > img.arrow,
  body .text-matriz-compatibilidad .arrow-container > .arrow {
    transform: rotate(180deg) !important;
  }
}